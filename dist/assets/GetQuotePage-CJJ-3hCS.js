import{n as m,E as M,z as p,G as W,u as k,r as f,h as E,i as $,j as e,F as R,k as S,ac as T,aO as I,aI as O,B as q,$ as B,a5 as L,a2 as o}from"./index-CUSVstqU.js";import{F as u}from"./FormSelect-DiVd6t5g.js";import{v as F}from"./imageValidation-BOnAwXS7.js";import{U as A}from"./upload-BVTc7vsb.js";import"./index-BdQq_4o_.js";import"./badge-c_xwgsXg.js";class G{baseUrl="/quotes";async createQuoteRequest(t){return(await m.post(`${this.baseUrl}/request`,t)).data.data}async getQuotes(){return(await m.get(this.baseUrl)).data.data}async getQuoteById(t){return(await m.get(`${this.baseUrl}/${t}`)).data.data}async updateQuoteStatus(t,c){return(await m.patch(`${this.baseUrl}/${t}/status`,{status:c})).data.data}async deleteQuote(t){await m.delete(`${this.baseUrl}/${t}`)}}const H=new G,K={quotes:["quotes"]},_=()=>M({mutationFn:d=>H.createQuoteRequest(d),onSuccess:()=>{W.invalidateQueries({queryKey:K.quotes}),p.success("Quote request submitted successfully!")},onError:d=>{const t=d.response?.data?.message||"Failed to submit quote request";p.error(t)}}),z=B({projectType:o().min(1,"Project type is required"),installationLocation:o().min(1,"Installation location is required"),spaceWidth:o().min(1,"Width is required").regex(/^\d+(\.\d{1,2})?$/,"Width must be a valid number"),spaceHeight:o().min(1,"Height is required").regex(/^\d+(\.\d{1,2})?$/,"Height must be a valid number"),existingDesign:o().min(1,"Please select if you have existing design"),cabinetStyle:o().min(1,"Cabinet style is required"),material:o().min(1,"Material is required"),finishColor:o().min(1,"Finish or color is required"),additionalComments:o().optional()}),X=[{value:"new-construction",label:"New construction"},{value:"remodel",label:"Remodel"},{value:"multi-unit",label:"Multi-unit"},{value:"commercial",label:"Commercial"}],Y=[{value:"kitchen",label:"Kitchen"},{value:"bathroom",label:"Bathroom"},{value:"laundry",label:"Laundry"},{value:"office",label:"Office"},{value:"garage",label:"Garage"},{value:"basement",label:"Basement"}],J=[{value:"blueprints",label:"Blueprints"},{value:"sketches",label:"Sketches"},{value:"photos",label:"Photos"},{value:"none",label:"No, I need help with design"}],V=[{value:"shaker",label:"Shaker"},{value:"flat-panel",label:"Flat panel"},{value:"raised-panel",label:"Raised panel"},{value:"modern",label:"Modern"},{value:"traditional",label:"Traditional"},{value:"transitional",label:"Transitional"}],Z=[{value:"mdf",label:"MDF"},{value:"plywood",label:"Plywood"},{value:"solid-wood",label:"Solid wood"},{value:"thermofoil",label:"Thermofoil"},{value:"laminate",label:"Laminate"},{value:"melamine",label:"Melamine"}],ee=[{value:"painted",label:"Painted"},{value:"stained",label:"Stained"},{value:"natural-wood",label:"Natural wood"},{value:"white",label:"White"},{value:"gray",label:"Gray"},{value:"black",label:"Black"},{value:"navy",label:"Navy"},{value:"custom-color",label:"Custom color"}],h=10,re=()=>{const d=k(),[t,c]=f.useState([]),[j,b]=f.useState(!1),[P,g]=f.useState(!1),x=_(),N=E({resolver:$(z),mode:"onChange",defaultValues:{projectType:"",installationLocation:"",spaceWidth:"",spaceHeight:"",existingDesign:"",cabinetStyle:"",material:"",finishColor:"",additionalComments:""}}),{handleSubmit:C}=N,l=x.isPending||P,v=a=>{a.preventDefault(),a.stopPropagation(),a.type==="dragenter"||a.type==="dragover"?b(!0):a.type==="dragleave"&&b(!1)},D=async a=>{if(a.preventDefault(),a.stopPropagation(),b(!1),a.dataTransfer.files&&a.dataTransfer.files[0]){const s=Array.from(a.dataTransfer.files),{validFiles:r,errors:i}=await F(s,h,t.length);r.length>0&&c(n=>[...n,...r]),i.forEach(n=>p.error(n))}},w=async a=>{if(a.target.files){const s=Array.from(a.target.files),{validFiles:r,errors:i}=await F(s,h,t.length);r.length>0&&c(n=>[...n,...r]),i.forEach(n=>p.error(n)),a.target.value=""}},U=a=>{c(s=>s.filter((r,i)=>i!==a))},Q=async a=>{try{let s=[];if(t.length>0){g(!0);try{const i=t.map(y=>L.uploadFile(y));s=(await Promise.all(i)).map(y=>y.data.url)}catch(i){throw p("Failed to upload images"),g(!1),i}finally{g(!1)}}const r={...a,images:s.length>0?s:void 0};await x.mutateAsync(r),d("/")}catch(s){console.error("Failed to submit quote request:",s)}};return e.jsx(R,{...N,children:e.jsx("div",{className:"min-h-screen bg-white rounded-lg shadow-sm  ",children:e.jsx("div",{className:"  my-8 w-full",children:e.jsxs("form",{onSubmit:C(Q),className:"space-y-8 p-6",children:[e.jsxs("div",{className:"",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Project Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(u,{name:"projectType",label:"What is the project type?",placeholder:"Select project type",options:X,disabled:l}),e.jsx(u,{name:"installationLocation",label:"What is the installation location?",placeholder:"Select installation location",options:Y,disabled:l}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What are the dimensions of the space?"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(S,{name:"spaceWidth",label:"",placeholder:"Width (in feet)",type:"text",disabled:l}),e.jsx(S,{name:"spaceHeight",label:"",placeholder:"Height (in feet)",type:"text",disabled:l})]})]}),e.jsx("div",{className:"md:col-span-1",children:e.jsx(u,{name:"existingDesign",label:"Do you have a layout or design already?",placeholder:"Select layout or design",options:J,disabled:l})})]})]}),e.jsxs("div",{className:"",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Cabinet Style & Material"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(u,{name:"cabinetStyle",label:"What cabinet style do you prefer?",placeholder:"Select cabinet style",options:V,disabled:l}),e.jsx(u,{name:"material",label:"What material do you want?",placeholder:"Select material",options:Z,disabled:l}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(u,{name:"finishColor",label:"What finish or color are you looking for?",placeholder:"Select finish or color",options:ee,disabled:l})})]})]}),e.jsxs("div",{className:"",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Upload Pictures"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Share photos of your space or design inspiration (optional)"}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${j?"border-primary bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:D,children:[e.jsx(A,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Drag & drop images here or"," ",e.jsxs("label",{className:"text-primary cursor-pointer hover:underline",children:["browse",e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:w,className:"hidden",disabled:l})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Max ",h," images â€¢ JPG, PNG, GIF up to 10MB each"]})]}),t.length>0&&e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[t.map((a,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:URL.createObjectURL(a),alt:`Upload ${s+1}`,className:"w-full h-24 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>U(s),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(T,{className:"w-4 h-4"})})]},s)),t.length<h&&e.jsxs("label",{className:"border-2 border-dashed border-gray-300 rounded-lg h-24 flex items-center justify-center cursor-pointer hover:border-gray-400 transition-colors",children:[e.jsx(I,{className:"w-6 h-6 text-gray-400"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:w,className:"hidden",disabled:l})]})]})})]}),e.jsx("div",{className:"",children:e.jsx(O,{name:"additionalComments",label:"Additional Comments",placeholder:"Enter any additional requirements or comments...",rows:4,disabled:l})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(q,{type:"button",className:"min-w-[150px] border-gray-500 text-gray-600",variant:"outline",onClick:()=>d(-1),disabled:l,children:"Cancel"}),e.jsx(q,{type:"submit",disabled:l,className:"min-w-[150px] text-white",children:x.isPending?"Submitting...":"Submit Quote Request"})]})]})})})})};export{re as GetQuotePage};
