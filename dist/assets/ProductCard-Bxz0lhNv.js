import{g as j,r as x,j as s,K as N,X as h,Y as w,N as v,Z as W,z as I}from"./index-CUSVstqU.js";import{B as d}from"./badge-c_xwgsXg.js";import{L as C,m as g}from"./LazyImage-D5w62-6q.js";import{u as k,a as D}from"./useWishlist-DogIdL_T.js";const z=e=>{switch(Number(e?.readyByDays)){case 0:return s.jsx(d,{className:" absolute bottom-2 left-2 bg-primary/80 text-white rounded px-2 py-1 text-[11px]",children:"Same Day Delivery"});case 1:return s.jsx(d,{className:"absolute bottom-2 left-2 bg-gray-200 text-gray-800 rounded px-2 py-1 text-[11px]",children:"Next Day Delivery"});default:return null}},S=({product:e,onProductClick:p})=>{const{isAuthenticated:f}=j(),r=e.id||e._id||"",o=k(),c=D(),[n,i]=x.useState(e.isInWishlist||!1),m=o.isPending||c.isPending;x.useEffect(()=>{i(e.isInWishlist||!1)},[e.isInWishlist]);const y=t=>{if(t.stopPropagation(),!f){I.error("Please login to add to wishlist");return}if(!m){const a=!n;i(a),a?o.mutate({productId:r},{onError:()=>{i(!1)}}):c.mutate({productId:r},{onError:()=>{i(!0)}})}},b=t=>{if(t.locationIds&&t.locationIds.length>0){const a=t.locationIds[0];if(typeof a=="object"&&a.city){const l=`${a.city}, ${a.state||""}`.trim();return l.length>30?l.slice(0,30)+"...":l}}return"Location not specified"},u=t=>t.images&&t.images.length>0?t.images[0]:"https://placehold.co/300x200.png";return s.jsx(s.Fragment,{children:s.jsxs(N,{className:h("overflow-hidden border-none shadow-none bg-transparent p-0 cursor-pointer group gap-0"),onClick:()=>p(e.slug,e.status),children:[s.jsxs("div",{className:"relative",children:[s.jsx(C,{src:u(e),alt:e.title,className:"rounded-xl",wrapperClassName:"w-full h-44 bg-gray-100 rounded-xl",fallbackSrc:"https://placehold.co/300x200.png",objectFit:"cover",showSkeleton:!0,fadeInDuration:.3,rootMargin:"100px"}),s.jsx(g.button,{className:"absolute top-2 right-2 rounded-full bg-black/20 backdrop-blur-sm p-2 transition-all duration-200 hover:bg-black/30",onClick:y,whileHover:{scale:1.1},whileTap:{scale:.95},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2},children:s.jsx(g.div,{animate:{scale:n?[1,1.2,1]:1},transition:{duration:.3},children:s.jsx(w,{className:h("h-5 w-5 transition-colors duration-200 cursor-pointer",n?"text-red-500 fill-red-500":"text-white hover:text-red-400",m&&"opacity-50")})})}),z(e)]}),s.jsxs(v,{className:"p-3 space-y-2",children:[s.jsx("div",{className:"flex justify-between items-center gap-2",children:s.jsxs("div",{className:"text-[16px] font-semibold mb-1",children:[W(e.price),e.priceType&&s.jsxs("span",{className:"text-[12px] font-normal",children:["/"," ",e.priceType==="sqft"?"sq ft":e.priceType==="linear"?"linear ft":"pallet"]})]})}),s.jsx("p",{className:"text-[12px] text-gray-500 line-clamp-1 capitalize",children:typeof e.category=="string"?e.category:e.category?.name}),s.jsxs("p",{className:"text-[14px] text-gray-700 leading-snug line-clamp-1 mb-1 capitalize",children:[e.title," ",e.dimensions?`- ${e.dimensions.length} L x ${e.dimensions.width} W x ${e.dimensions.height} H `:""," "]}),s.jsxs("div",{className:"flex justify-between text-[12px] text-gray-500",children:[s.jsx("span",{className:"capitalize",children:b(e)}),s.jsx("span",{className:"text-primary capitalize",children:e.seller?.profile?.businessName})]})]})]})})};export{S as P,z as g};
