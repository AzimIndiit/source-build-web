import{A as ee,r as u,j as e,aq as ie,ar as le,as as ne,at as re,aA as se,au as ce,L as U,aN as E,B as P,ai as W,ah as R,ap as te,C as oe,b as de,ag as me,aJ as xe,S as c,c as he,aj as H,ak as K,al as Y,W as G,am as J,an as Z,ao as Q,z as ge}from"./index-BiCr9dd_.js";import{P as pe}from"./pagination-wrapper-C-UNib8j.js";import{F as V}from"./FilterDropdown-AoAS3t64.js";import{g as ue,h as fe,b as ye,c as je}from"./useProductMutations-u5jL6sZ4.js";import"./PickupHoursSelector-CukVc2JL.js";import{B as q}from"./badge-gylWw4eT.js";import{g as be}from"./orderUtils-DR-jD4b-.js";import{A as Ne,a as ve}from"./alert-BWvEVmDW.js";import{C as ae}from"./circle-alert-Cy-Zb1fX.js";import{M as X}from"./minus-D5glgwFc.js";import{T as ke}from"./trash-2-BSx2CMeK.js";import{f as we}from"./format-Byp0gi1d.js";import"./index-BdQq_4o_.js";import"./productService-DV0qzB1U.js";import"./en-US-CPLesiGp.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Ce=ee("box",Se);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Pe=ee("layers",Ae),Me=({isOpen:a,onClose:k,product:n,onUpdateStock:I})=>{const[m,x]=u.useState(0),[j,C]=u.useState(!1),[o,N]=u.useState([]),[y,M]=u.useState([]),[g,O]=u.useState(!1),[T,b]=u.useState(""),[L,A]=u.useState(!1),[v,F]=u.useState(null);u.useEffect(()=>{n&&(x(n.quantity||0),C(n.outOfStock||!1),n.variants&&(N(n.variants.map(s=>s.quantity||0)),M(n.variants.map(s=>s.outOfStock||!1))),b(""))},[n]);const z=s=>{if(s===""){x(0),b("");return}const i=s.replace(/\D/g,""),f=parseInt(i,10)||0;x(f),b("")},_=(s,i)=>{if(i===""){const B=[...o];B[s]=0,N(B),b("");return}const f=i.replace(/\D/g,""),S=parseInt(f,10)||0,d=[...o];d[s]=S,N(d),b("")},l=()=>{x(s=>s+1)},p=()=>{m>0&&x(s=>s-1)},h=s=>{const i=[...o];i[s]=(i[s]||0)+1,N(i)},w=s=>{if(o[s]>0){const i=[...o];i[s]=i[s]-1,N(i)}},D=()=>{F("update"),A(!0)},$=async()=>{if(!(!n||!v)){O(!0),b(""),A(!1);try{const s=n.id||n._id||"";if(v==="update"){const i=n.variants?o.map((f,S)=>({index:S,quantity:f,outOfStock:y[S]})):void 0;await I(s,m,i,j)}k()}catch(s){b("Failed to update stock. Please try again."),console.error("Stock update error:",s)}finally{O(!1),F(null)}}},t=()=>{if(!n)return"";if(v==="update")return e.jsxs("div",{children:[e.jsxs("p",{children:["You are about to update the stock for ",e.jsx("strong",{children:n.title}),":"]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("p",{children:["• Main Stock: ",e.jsx("strong",{children:m})," units"]}),n.variants&&n.variants.length>0&&e.jsxs("p",{children:["• ",n.variants.length," variant(s) will also be updated"]})]})]});if(v==="out-of-stock")return e.jsxs("div",{children:[e.jsxs("p",{children:["This will mark ",e.jsx("strong",{children:n.title})," as completely out of stock:"]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("p",{children:["• Main stock will be set to ",e.jsx("strong",{children:"0"})]}),r&&e.jsxs("p",{children:["• All ",n.variants?.length," variant(s) will be set to ",e.jsx("strong",{children:"0"})]})]})]});if(v==="in-stock"){const s=o.filter(i=>i===0).length;return e.jsxs("div",{children:[e.jsxs("p",{children:["This will restore stock for ",e.jsx("strong",{children:n.title}),":"]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[m===0&&e.jsxs("p",{children:["• Main stock: 0 → ",e.jsx("strong",{children:"10"})," units"]}),m>0&&e.jsxs("p",{children:["• Main stock: ",e.jsx("strong",{children:m})," units (unchanged)"]}),r&&s>0&&e.jsxs("p",{children:["• ",s," variant(s) with 0 stock → ",e.jsx("strong",{children:"10"})," units each"]}),r&&o.filter(i=>i>0).length>0&&e.jsxs("p",{children:["• ",o.filter(i=>i>0).length," variant(s) will keep their current stock"]})]})]})}return""};if(!n)return null;const r=n.variants&&n.variants.length>0;return m>0||r&&o.some(s=>s>0),m===0&&(!r||o.every(s=>s===0)),e.jsxs(e.Fragment,{children:[e.jsx(ie,{open:a,onOpenChange:k,children:e.jsxs(le,{className:"w-[95vw] max-w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl bg-white max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(ne,{className:"sm:space-y-3",children:[e.jsxs(re,{className:"flex items-center gap-2 text-xl",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(se,{className:"w-5 h-5 text-primary"})}),e.jsx("span",{children:"Inventory Management"})]}),e.jsxs(ce,{className:"text-gray-600",children:["Manage stock levels for"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:n.title})]})]}),e.jsxs("div",{className:"space-y-5 sm:py-4",children:[T&&e.jsxs(Ne,{variant:"destructive",className:"rounded-lg",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx(ve,{className:"font-medium",children:T})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg sm:rounded-xl p-3 sm:p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(U,{htmlFor:"main-stock",className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4 text-gray-500"}),"Main Stock Quantity"]}),e.jsx("div",{className:"flex items-center justify-end text-xs text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx(U,{htmlFor:"main-out-of-stock",className:"text-[10px] text-gray-600",children:"Out of Stock"}),e.jsx(E,{id:"main-out-of-stock",className:"h-6 w-12",checked:j,onCheckedChange:s=>{C(s)}})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(P,{type:"button",variant:"outline",size:"icon",onClick:p,disabled:g||m===0||j,className:"h-10 w-10 sm:h-12 sm:w-12 rounded-lg sm:rounded-xl border hover:bg-gray-100 hover:border-gray-300 transition-all",children:e.jsx(X,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("input",{id:"main-stock",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:m,onChange:s=>z(s.target.value),disabled:g||j,className:"flex-1 text-center text-lg sm:text-2xl font-semibold h-10 sm:h-12 rounded-lg sm:rounded-xl border focus:border-blue-500 transition-all focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-offset-0",onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()}}),e.jsx(P,{type:"button",variant:"outline",size:"icon",onClick:l,disabled:g||j,className:"h-10 w-10 sm:h-12 sm:w-12 rounded-lg sm:rounded-xl border hover:bg-gray-100 hover:border-gray-300 transition-all",children:e.jsx(W,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),r&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(U,{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4 text-gray-500"}),"Variant Stock"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3",children:n.variants?.map((s,i)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 space-y-2 hover:border-gray-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-md border-2 border-gray-200 flex-shrink-0",style:{backgroundColor:s.color.toLowerCase()==="white"?"#f9fafb":s.color.toLowerCase()}}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:s.color}),e.jsxs("span",{className:"text-xs text-gray-500",children:["$",s.price]})]})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{htmlFor:`variant-out-of-stock-${i}`,className:"text-[10px] text-gray-600",children:"Out of Stock"}),e.jsx(E,{id:`variant-out-of-stock-${i}`,className:"h-6 w-12",checked:y[i]||!1,onCheckedChange:f=>{const S=[...y];S[i]=f,M(S)}})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{type:"button",variant:"outline",size:"icon",onClick:()=>w(i),disabled:g||o[i]===0||y[i],className:"h-8 w-8 rounded-sm hover:bg-gray-50 transition-all p-0",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:o[i]||0,onChange:f=>_(i,f.target.value),disabled:g||y[i],className:"flex-1 text-center h-8 text-xs sm:text-sm font-medium rounded-sm border focus:border-primary transition-all focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-offset-0 min-w-[40px]",onKeyPress:f=>{/[0-9]/.test(f.key)||f.preventDefault()}}),e.jsx(P,{type:"button",variant:"outline",size:"icon",onClick:()=>h(i),disabled:g||y[i],className:"h-8 w-8 rounded-sm hover:bg-gray-50 transition-all p-0",children:e.jsx(W,{className:"h-3 w-3"})})]})]},i))})]})]}),e.jsxs("div",{className:"flex justify-center sm:justify-end flex-row gap-2 sm:gap-2 py-4 border-t border-gray-200 ",children:[e.jsx(P,{type:"button",variant:"outline",onClick:k,disabled:g,className:" px-6 text-gray-700 hover:text-gray-900 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all rounded-lg w-[180px] sm:w-[124px]",children:"Cancel"}),e.jsx(P,{type:"button",onClick:D,disabled:g,className:R(" px-6  text-white rounded-lg  w-[180px] sm:w-[124px] transition-all",g&&"opacity-70"),children:g?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Stock"})]})]})}),e.jsx(te,{isOpen:L,onClose:()=>{A(!1),F(null)},onConfirm:$,title:"Confirm Stock Update",description:t(),confirmText:"Yes, Update Stock",cancelText:"Cancel",isLoading:g})]})},De=({product:a,onProductClick:k,onEditProduct:n,onDeleteProduct:I})=>{const[m,x]=u.useState(!1),[j,C]=u.useState(!1),o=ue(),N=fe(),y=a.id||a._id||"",M=a.status==="active",g=()=>{let l=0,p=!1,h=!0;return a.outOfStock||(h=!1,a.quantity>0&&(l+=a.quantity,p=!0)),a.variants&&a.variants.length>0&&a.variants.forEach(w=>{w.outOfStock||(h=!1,w.quantity>0&&(l+=w.quantity,p=!0))}),h?{totalStock:0,hasAnyStock:!1,isOutOfStock:!0}:{totalStock:l,hasAnyStock:p,isOutOfStock:!1}},{totalStock:O,hasAnyStock:T,isOutOfStock:b}=g(),L=async l=>{if(!m){x(!0);try{await o.mutateAsync({id:y,status:l?"active":"inactive"})}catch(p){console.error("Failed to update product status:",p)}finally{x(!1)}}},A=async(l,p,h,w)=>{await N.mutateAsync({id:l,quantity:p,variants:h,outOfStock:w})},v=l=>{l.stopPropagation(),C(!0)},F=l=>{try{return we(new Date(l),"dd/MM/yyyy")}catch{return l}},z=l=>{if(l.locationIds&&l.locationIds.length>0){const p=l.locationIds[0];if(typeof p=="object"&&p.city){const h=`${p.city}, ${p.state||""}`.trim();return h.length>30?h.slice(0,30)+"...":h}}return"Location not specified"},_=l=>l.images&&l.images.length>0?l.images[0]:"https://placehold.co/300x200.png";return e.jsxs(e.Fragment,{children:[e.jsxs(oe,{className:R("overflow-hidden border border-gray-200 rounded-xl hover:shadow-md transition-shadow p-0 cursor-pointer group gap-0",a.status==="inactive"&&"grayscale"),onClick:()=>k(a.slug,a.status),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:_(a),alt:a.title,className:"w-full h-40 object-cover",onError:l=>{l.target.src="https://placehold.co/300x200.png"}}),b||!T?e.jsx(q,{className:"absolute bottom-2 left-2 bg-red-500 text-white rounded px-2 py-1 text-[11px]",children:"Out of Stock"}):e.jsxs(q,{className:"absolute bottom-2 left-2 bg-primary text-white rounded px-2 py-1 text-[11px]",children:["In Stock (",O,")"]}),e.jsx(q,{className:R("absolute bottom-2 right-2 rounded px-2 py-1 text-[11px] capitalize",be(a.status)),children:a.status})]}),e.jsxs(de,{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center gap-2",children:[e.jsxs("div",{className:"text-[16px] font-semibold mb-1",children:[me(a.price)," / sq ft"]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(P,{title:"Edit",variant:"ghost",size:"icon",onClick:l=>n(l,a.id||a._id||""),className:"w-8 h-8 hover:bg-gray-200 text-gray-600 hover:text-gray-900 rounded-md",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx(P,{title:"Delete",variant:"ghost",size:"icon",onClick:l=>I(l,a.id||a._id||"",a.title),className:"w-8 h-8 hover:bg-red-50 text-red-600 hover:text-red-700 rounded-md",children:e.jsx(ke,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-[12px] text-gray-500 line-clamp-1 capitalize",children:a.category}),e.jsxs("p",{className:"text-[14px] text-gray-700 leading-snug line-clamp-1 mb-1 capitalize",children:[a.title," ",a.dimensions?`- ${a.dimensions.length} L x ${a.dimensions.width} W x ${a.dimensions.height} H `:""," "]}),e.jsxs("div",{className:"flex justify-between text-[12px] text-gray-500",children:[e.jsx("span",{className:"capitalize",children:z(a)}),e.jsx("span",{className:"text-primary capitalize",children:F(a.createdAt)})]}),a.status!=="draft"&&e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-2 mt-2",children:[e.jsx(P,{onClick:v,leftIcon:se,variant:"outline",className:"text-gray-600 h-10  !text-sm hover:text-gray-600 border-gray-500 hover:bg-gray-50",children:"Manage Stock"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{htmlFor:`status-${y}`,className:"text-xs text-gray-600",children:M?"Active":"Inactive"}),e.jsx(E,{id:`status-${y}`,checked:M,onCheckedChange:L,disabled:m,className:R("h-6 w-12  transition-all duration-200",m&&"opacity-70",M&&"data-[state=checked]:bg-green-500"),onClick:l=>l.stopPropagation()})]})]})]})]}),e.jsx(Me,{isOpen:j,onClose:()=>C(!1),product:a,onUpdateStock:A})]})},Fe=()=>e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"h-8 w-32"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"h-10 w-32 rounded-lg"}),e.jsx(c,{className:"h-10 w-24 rounded-lg"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:8}).map((a,k)=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx(c,{className:"w-full h-48"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx(c,{className:"h-5 w-full"}),e.jsx(c,{className:"h-4 w-3/4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(c,{className:"h-6 w-20"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(c,{className:"h-4 w-4 rounded"}),e.jsx(c,{className:"h-4 w-8"})]})]}),e.jsx(c,{className:"h-3 w-24"}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(c,{className:"h-8 flex-1 rounded"}),e.jsx(c,{className:"h-8 w-8 rounded"}),e.jsx(c,{className:"h-8 w-8 rounded"})]})]})]},k))}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(c,{className:"h-10 w-10 rounded"}),e.jsx(c,{className:"h-10 w-10 rounded"}),e.jsx(c,{className:"h-10 w-10 rounded"}),e.jsx(c,{className:"h-10 w-16 rounded"}),e.jsx(c,{className:"h-10 w-10 rounded"}),e.jsx(c,{className:"h-10 w-10 rounded"})]})]}),He=()=>{const a=he(),[k,n]=u.useState(1),[I,m]=u.useState({sorting:"ascending"}),[x,j]=u.useState("all"),[C,o]=u.useState({popularity:[{id:"best-selling",label:"Best-Selling Products",checked:!1},{id:"most-viewed",label:"Most Viewed",checked:!1},{id:"top-rated",label:"Top-Rated",checked:!1},{id:"most-reviewed",label:"Most Reviewed",checked:!1},{id:"featured",label:"Featured Products",checked:!1},{id:"trending",label:"Trending Now",checked:!1}],newest:[{id:"recently-updated",label:"Recently Updated",checked:!1},{id:"featured-new",label:"Featured New Products",checked:!1},{id:"sort-by-date",label:"Sort by Date Added",checked:!1},{id:"new-arrivals",label:"New Arrivals",checked:!1}],availability:[{id:"delivery",label:"Delivery",checked:!1},{id:"shipping",label:"Shipping",checked:!1},{id:"pickup",label:"Pickup",checked:!1}],readyTime:[{id:"next-day",label:"Ready Next Day",checked:!1},{id:"this-week",label:"Ready This Week",checked:!1}],sorting:"ascending",pricing:"",priceRange:[]}),[N,y]=u.useState({isOpen:!1,productId:"",productTitle:""}),M=10,{data:g,isLoading:O,isError:T,refetch:b}=ye({page:k,limit:M,location:x==="all"?void 0:x,...I}),L=je(),A=t=>{o(t);const r={},s=t.popularity.filter(d=>d.checked).map(d=>d.id);s.length>0&&(r.popularity=s);const i=t.newest.filter(d=>d.checked).map(d=>d.id);i.length>0&&(r.newest=i);const f=t.availability.filter(d=>d.checked).map(d=>d.id);f.length>0&&(r.availability=f);const S=t.readyTime.filter(d=>d.checked).map(d=>d.id);S.length>0&&(r.readyTime=S),t.sorting!=="ascending"&&(r.sorting=t.sorting),t.pricing!=="custom"&&t.pricing!==""?r.pricing=t.pricing:t.priceRange&&t.pricing!==""&&(r.pricing="custom",r.priceRange=t.priceRange.join(",")),m(r),n(1)},v=()=>{m({}),n(1),o({popularity:[{id:"best-selling",label:"Best-Selling Products",checked:!1},{id:"most-viewed",label:"Most Viewed",checked:!1},{id:"top-rated",label:"Top-Rated",checked:!1},{id:"most-reviewed",label:"Most Reviewed",checked:!1},{id:"featured",label:"Featured Products",checked:!1},{id:"trending",label:"Trending Now",checked:!1}],newest:[{id:"recently-updated",label:"Recently Updated",checked:!1},{id:"featured-new",label:"Featured New Products",checked:!1},{id:"sort-by-date",label:"Sort by Date Added",checked:!1},{id:"new-arrivals",label:"New Arrivals",checked:!1}],availability:[{id:"delivery",label:"Delivery",checked:!1},{id:"shipping",label:"Shipping",checked:!1},{id:"pickup",label:"Pickup",checked:!1}],readyTime:[{id:"next-day",label:"Ready Next Day",checked:!1},{id:"this-week",label:"Ready This Week",checked:!1}],sorting:"ascending",pricing:"",priceRange:[]})},F=(t,r)=>{if(r==="draft"){ge("Draft products are not available for preview",{icon:"⚠️",style:{background:"#FEF8C6",color:"#000",border:"1px solid #FCE992"}});return}else a(`/seller/products/${t}`)},z=(t,r)=>{t.stopPropagation(),a(`/seller/products/${r}/edit`)},_=(t,r,s)=>{t.stopPropagation(),y({isOpen:!0,productId:r,productTitle:s})},l=async()=>{try{await L.mutateAsync(N.productId),y({isOpen:!1,productId:"",productTitle:""}),b()}catch(t){console.error("Failed to delete product:",t)}},p=()=>{y({isOpen:!1,productId:"",productTitle:""})};if(O)return e.jsx(Fe,{});if(T)return e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Listing"}),e.jsx(V,{onApply:A,onClear:v,initialFilters:C})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(ae,{className:"h-12 w-12 text-red-500"}),e.jsx("p",{className:"text-gray-600",children:"Failed to load products"}),e.jsx("button",{onClick:()=>b(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90",children:"Try Again"})]})]});const h=g?.data,w=Array.isArray(h)?h:h?.products||[],D=Array.isArray(h)?[]:h?.availableLocations||[],$=g?.pagination?.totalPages||1;return w.length===0?e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Listing"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(H,{children:[e.jsx(K,{asChild:!0,children:e.jsxs("button",{className:"bg-blue-50 flex gap-2 h-[42px] items-center px-2 md:px-3 py-2 rounded-lg hover:bg-blue-100 transition-colors outline-none cursor-pointer",children:[e.jsx(Y,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-xs text-gray-600 hidden md:block",children:"Location"}),e.jsxs("span",{className:"text-xs md:text-sm font-semibold text-gray-900 flex items-center gap-1",children:[x==="all"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden lg:inline",children:"All Locations"}),e.jsx("span",{className:"lg:hidden",children:"All"})]}):e.jsx(e.Fragment,{children:D.find(t=>t._id===x)?.displayName||D.find(t=>t._id===x)?.city||"Select Location"}),e.jsx(G,{size:12})]})]})]})}),e.jsxs(J,{align:"start",className:"w-56",children:[e.jsx(Z,{}),e.jsx(Q,{className:"cursor-pointer",onClick:()=>j("all"),children:"All Locations"}),D.map(t=>e.jsx(Q,{className:"cursor-pointer",onClick:()=>j(t._id),children:t.displayName||`${t.city}, ${t.state}`},t._id))]})]}),e.jsx(V,{onApply:A,onClear:v,initialFilters:C})]})]}),e.jsx("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:e.jsx("p",{className:"text-gray-600",children:"No products found"})})]}):e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Listing"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(H,{children:[e.jsx(K,{asChild:!0,children:e.jsxs("button",{className:"bg-blue-50 flex gap-2 h-[42px] items-center px-2 md:px-3 py-2 rounded-lg hover:bg-blue-100 transition-colors outline-none cursor-pointer",children:[e.jsx(Y,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-xs text-gray-600 hidden md:block",children:"Location"}),e.jsxs("span",{className:"text-xs md:text-sm font-semibold text-gray-900 flex items-center gap-1",children:[x==="all"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden lg:inline",children:"All Locations"}),e.jsx("span",{className:"lg:hidden",children:"All"})]}):e.jsx(e.Fragment,{children:D.find(t=>t._id===x)?.displayName||D.find(t=>t._id===x)?.city||"Select Location"}),e.jsx(G,{size:12})]})]})]})}),e.jsxs(J,{align:"start",className:"w-56",children:[e.jsx(Z,{}),e.jsx(Q,{className:"cursor-pointer",onClick:()=>j("all"),children:"All Locations"}),D.map(t=>e.jsx(Q,{className:"cursor-pointer",onClick:()=>j(t._id),children:t.displayName||`${t.city}, ${t.state}`},t._id))]})]}),e.jsx(V,{onApply:A,onClear:v,initialFilters:C})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:w.map(t=>e.jsx(De,{product:t,onProductClick:F,onEditProduct:z,onDeleteProduct:_},t.id||t._id))}),$>1&&e.jsx(pe,{currentPage:k,totalPages:$,onPageChange:n}),e.jsx(te,{isOpen:N.isOpen,onClose:p,onConfirm:l,title:"Delete Product",description:e.jsxs(e.Fragment,{children:["Are you sure you want to delete"," ",e.jsxs("strong",{className:"font-semibold",children:['"',N.productTitle,'"']}),"? This action cannot be undone."]}),confirmText:"Delete",cancelText:"Cancel",isLoading:L.isPending})]})};export{He as default};
