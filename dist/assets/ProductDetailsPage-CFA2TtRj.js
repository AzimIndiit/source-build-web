import{j as s,aa as V,ab as T,ac as F,S as a,ay as M,u as z,r as d,B as p,f as _,C as E,am as O,I as L}from"./index-BCiIUrXb.js";import{B as f}from"./badge-C6OOTzUs.js";import{R as q}from"./ReadMore-DaC2HHC_.js";import{B as Q}from"./breadcrumb-wrapper-BqPArqaB.js";import{f as W}from"./date-utils-CIparGJB.js";import{a as w,S as H}from"./StarRating-DqDRV7R4.js";import{d as G,a as J}from"./useProductMutations-BwEQtzFr.js";const K=({review:t})=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 sm:p-6 border border-gray-200",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-0",children:[s.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[s.jsxs(V,{className:"h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0",children:[s.jsx(T,{src:t.avatar,alt:t.userName}),s.jsx(F,{className:"bg-orange-500 text-white text-sm sm:text-base",children:t.userName.split(" ").map(c=>c[0]).join("")})]}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start justify-between sm:block",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:t.userName}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:W(t.date)})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-yellow-100 px-2 py-1 sm:hidden rounded-full ml-2",children:[s.jsx(w,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"font-semibold text-gray-900 text-xs",children:t.rating})]})]})})]}),s.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-orange-100 px-3 py-2 rounded-full",children:[s.jsx(w,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"font-semibold text-gray-900",children:t.rating})]})]}),s.jsx("div",{className:"mt-3 sm:mt-4 sm:ml-16",children:s.jsx("p",{className:"text-gray-700 leading-relaxed text-sm sm:text-base",children:t.comment})})]}),U=()=>s.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(a,{className:"h-4 w-12"}),s.jsx(a,{className:"h-4 w-2"}),s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-4 w-2"}),s.jsx(a,{className:"h-4 w-24"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx(a,{className:"w-full h-[250px] sm:h-[350px] md:h-[400px] rounded-sm"}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(a,{className:"absolute left-0 z-10 w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-full"}),s.jsx("div",{className:"flex gap-2 sm:gap-3 mx-10 sm:mx-12 md:mx-14",children:Array.from({length:4}).map((t,c)=>s.jsx(a,{className:"flex-shrink-0 w-[80px] h-[60px] sm:w-[120px] sm:h-[80px] md:w-[150px] md:h-[100px] lg:w-[180px] lg:h-[120px] rounded-lg"},c))}),s.jsx(a,{className:"absolute right-0 z-10 w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-full"})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(a,{className:"h-8 sm:h-10 lg:h-12 w-full mb-3 sm:mb-4"}),s.jsx(a,{className:"h-6 sm:h-8 w-3/4 mb-2"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[s.jsx(a,{className:"h-8 sm:h-10 w-20"}),s.jsx(a,{className:"h-6 sm:h-8 w-16"}),s.jsx(a,{className:"h-6 w-12 rounded-full"})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[s.jsx(a,{className:"h-4 w-20"}),s.jsx(a,{className:"h-4 w-24"})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4 sm:pt-6 space-y-2",children:[s.jsx(a,{className:"h-4 w-full"}),s.jsx(a,{className:"h-4 w-full"}),s.jsx(a,{className:"h-4 w-3/4"}),s.jsx(a,{className:"h-4 w-1/2"})]}),s.jsx("div",{className:"border-t border-gray-200 pt-4 sm:pt-6",children:s.jsx(a,{className:"h-4 w-48"})}),s.jsx("div",{className:"border-t border-gray-200 pt-4 sm:pt-6",children:s.jsx(a,{className:"h-4 w-32"})}),s.jsxs("div",{className:"border-t border-gray-200 pt-4 sm:pt-6",children:[s.jsx(a,{className:"h-4 w-16 mb-2"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:3}).map((t,c)=>s.jsx(a,{className:"h-6 w-16 rounded-full"},c))})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4 sm:pt-6",children:[s.jsx(a,{className:"h-4 w-16 mb-2"}),s.jsx("div",{className:"flex gap-3",children:Array.from({length:4}).map((t,c)=>s.jsx(a,{className:"w-12 h-12 rounded-full"},c))})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 pt-4 sm:pt-6",children:[s.jsx(a,{className:"w-full sm:flex-1 h-[48px] sm:h-[56px] rounded"}),s.jsx(a,{className:"w-full sm:flex-1 h-[48px] sm:h-[56px] rounded"})]})]})]}),s.jsxs("div",{className:"mt-8 sm:mt-12 border-t border-gray-200 pt-6 sm:pt-8",children:[s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx(a,{className:"h-6 sm:h-8 w-40 mb-3 sm:mb-4"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((t,c)=>s.jsx(a,{className:"w-5 h-5"},c))}),s.jsx(a,{className:"h-4 w-20"})]})]}),s.jsx("div",{className:"space-y-4 sm:space-y-6",children:Array.from({length:3}).map((t,c)=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[s.jsx(a,{className:"w-12 h-12 rounded-full"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(a,{className:"h-4 w-24"}),s.jsx(a,{className:"h-3 w-20"})]}),s.jsx("div",{className:"ml-auto",children:s.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((b,g)=>s.jsx(a,{className:"w-4 h-4"},g))})})]}),s.jsx(a,{className:"h-4 w-full"}),s.jsx(a,{className:"h-4 w-3/4"}),s.jsx(a,{className:"h-4 w-1/2"})]},c))})]})]}),rs=()=>{const{slug:t}=M(),c=z();console.log("slug",t);const{data:b,isLoading:g,error:k}=G(t||""),C=J(),[n,x]=d.useState(0),[m,o]=d.useState(null),[R,u]=d.useState(!1),N=d.useRef(null),y=d.useRef([]),l=b?.data,i=m?.images?.length>0?m.images:l?.images||[];d.useEffect(()=>{x(0)},[m]);const j=[];d.useEffect(()=>{const e=y.current[n],r=N.current;if(e&&r){const h=r.getBoundingClientRect(),v=e.getBoundingClientRect();(v.left<h.left||v.right>h.right)&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[n]);const I=()=>{i.length&&x(e=>e>0?e-1:i.length-1)},S=()=>{i.length&&x(e=>e<i.length-1?e+1:0)},$=e=>{x(e)},A=()=>{u(!0)},D=async()=>{if(l?.id)try{await C.mutateAsync(l.id),P,u(!1),c("/seller/products")}catch{L.error("Failed to delete product")}},B=[{label:"Home",href:"/"},{label:"MyListing",href:"/seller/products"},{label:l?.title||"Product",isCurrentPage:!0}];return g?s.jsx(U,{}):k||!l?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load product"}),s.jsx(p,{onClick:()=>c("/seller/products"),variant:"outline",children:"Back to Products"})]})}):s.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[s.jsx("div",{className:"",children:s.jsx(Q,{items:B})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("div",{className:"rounded-md",children:s.jsx("img",{src:i[n]||"https://placehold.co/600x600/e5e7eb/6b7280?text=No+Image",alt:l?.title||"Product image",className:"w-full h-[250px] sm:h-[350px] md:h-[400px] object-cover rounded-sm"})}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{onClick:I,className:"absolute left-0 z-10 w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-white rounded-full border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors shadow-sm cursor-pointer","aria-label":"Previous image",children:s.jsx(_,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"})}),s.jsx("div",{ref:N,className:"flex gap-2 sm:gap-3 overflow-x-auto mx-10 sm:mx-12 md:mx-14 px-1 sm:px-2 scroll-smooth [&::-webkit-scrollbar]:hidden",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:i.map((e,r)=>s.jsx("button",{ref:h=>{y.current[r]=h},onClick:()=>$(r),className:`flex-shrink-0 w-[80px] h-[60px] sm:w-[120px] sm:h-[80px] md:w-[150px] md:h-[100px] lg:w-[180px] lg:h-[120px] rounded-lg overflow-hidden border-2 transition-all ${n===r?"border-primary shadow-md":"border-gray-200 hover:border-gray-300"}`,children:s.jsx("img",{src:e,alt:`${l?.title} ${r+1}`,className:"w-full h-full object-cover"})},r))}),s.jsx("button",{onClick:S,className:"absolute right-0 z-10 w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-white rounded-full border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors shadow-sm cursor-pointer","aria-label":"Next image",children:s.jsx(E,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"})})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-3 sm:mb-4",children:l.title}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[s.jsxs("span",{className:"text-xl sm:text-2xl font-bold text-primary",children:["$",(m?.price||l.price)?.toFixed(2)||"0.00"]}),(()=>{const e=m?.discount||l.discount,r=m?.price||l.price||0;if(e?.discountType!=="none"&&e?.discountValue){if(e.discountType==="percentage")return s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-lg sm:text-xl md:text-2xl text-gray-400 line-through",children:["$",(r/(1-e.discountValue/100)).toFixed(2)]}),s.jsxs(f,{className:"bg-primary text-white px-2 sm:px-3 py-0.5 sm:py-1 text-xs sm:text-sm font-semibold",children:["-",e.discountValue,"%"]})]});if(e.discountType==="flat")return s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-lg sm:text-xl md:text-2xl text-gray-400 line-through",children:["$",(r+e.discountValue).toFixed(2)]}),s.jsxs(f,{className:"bg-primary text-white px-2 sm:px-3 py-0.5 sm:py-1 text-xs sm:text-sm font-semibold",children:["-$",e.discountValue]})]})}return null})()]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 text-xs sm:text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Availability:"}),(()=>{const e=m?.quantity||l.quantity||0;return e>0?s.jsxs("span",{className:"text-green-600 font-medium",children:["In stock (",e," available)"]}):s.jsx("span",{className:"text-red-600 font-medium",children:"Out of stock"})})()]})]})]}),s.jsxs("div",{className:" flex flex-col sm:hidden border-t border-gray-200 text-xs sm:text-sm text-gray-600 pt-4 sm:pt-6 space-y-2",children:[s.jsx("span",{className:"font-medium",children:"Colors: "}),s.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[s.jsx("div",{onClick:()=>o(null),className:`w-12 h-12 rounded-full border-2transition-all cursor-pointer ${m===null?"border-black bg-primary/5 border-3":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:l.color}}),l.variants&&l.variants.length>0&&l.variants.map((e,r)=>s.jsx("div",{onClick:()=>o(e),className:`w-12 h-12 rounded-full border-2transition-all cursor-pointer ${m===e?"border-black bg-primary/5 border-3":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:e.color}},r))]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-4 sm:pt-6",children:s.jsx(q,{text:l.description||"No description available",maxLength:200,className:"text-sm sm:text-base text-gray-700 leading-relaxed"})}),s.jsx("div",{className:"border-t border-gray-200 pt-4 sm:pt-6",children:s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Categories: "}),s.jsxs("span",{className:"text-gray-900",children:[l.category,", ",l.subCategory]})]})}),s.jsx("div",{className:"border-t border-gray-200 pt-4 sm:pt-6 grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs sm:text-sm",children:l.brand&&s.jsxs("div",{className:" text-gray-600 flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Brand: "}),s.jsx("p",{className:"text-sm font-medium",children:l.brand})]})}),l.productTag&&l.productTag.length>0&&s.jsx("div",{className:"border-t border-gray-200 pt-4 sm:pt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:s.jsxs("div",{className:"col-span-2 space-y-2 text-xs sm:text-sm  text-gray-600 flex-col items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Tags: "}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l.productTag.map((e,r)=>s.jsx(f,{variant:"secondary",className:"text-xs bg-blue-100 capitalize",children:e},r))})]})}),s.jsxs("div",{className:"border-t hidden sm:flex flex-col border-gray-200 text-xs sm:text-sm text-gray-600 pt-4 sm:pt-6 space-y-2",children:[s.jsx("span",{className:"font-medium",children:"Colors: "}),s.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[s.jsx("div",{onClick:()=>o(null),className:`w-12 h-12 rounded-full border-2transition-all cursor-pointer ${m===null?"border-black bg-primary/5 border-3":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:l.color}}),l.variants&&l.variants.length>0&&l.variants.map((e,r)=>s.jsx("div",{onClick:()=>o(e),className:`w-12 h-12 rounded-full border-2transition-all cursor-pointer ${m===e?"border-black bg-primary/5 border-3":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:e.color}},r))]})]}),s.jsxs("div",{className:"flex flex-row space-y-2 sm:space-y-0 space-x-4 pt-4 sm:pt-6",children:[s.jsx(p,{onClick:()=>c(`/seller/products/${l.id}/edit`),className:"flex-1 bg-primary hover:bg-primary/90 text-white font-semibold py-3 text-sm sm:text-base h-[48px] sm:h-[56px]",children:"Edit"}),s.jsx(p,{variant:"destructive",onClick:A,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 text-sm sm:text-base h-[48px] sm:h-[56px]",children:"Delete"})]})]})]}),s.jsx("div",{className:"mt-8 sm:mt-12 border-t border-gray-200 pt-6 sm:pt-8",children:s.jsxs("div",{className:"",children:[s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3 sm:mb-4",children:"Reviews & Rating"}),s.jsx(H,{rating:l?.rating||0,showValue:!0,totalReviews:l?.totalReviews||0})]}),s.jsx("div",{className:"space-y-4 sm:space-y-6",children:j.length>0?j.map(e=>s.jsx(K,{review:e},e.id)):s.jsx("div",{className:"text-gray-500 w-full text-center text-lg flex justify-center items-center min-h-[400px]",children:"No reviews yet!"})}),j.length>10&&s.jsx("div",{className:"mt-6 sm:mt-8 text-center",children:s.jsx(p,{variant:"outline",className:"px-6 sm:px-8 py-2 text-sm sm:text-base text-primary hover:text-primary/80 underline border-none shadow-none",children:"View all"})})]})}),s.jsx(O,{isOpen:R,onClose:()=>u(!1),onConfirm:D})]})};export{rs as default};
