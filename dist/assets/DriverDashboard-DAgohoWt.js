import{r as s,u as h,j as a}from"./index-BCiIUrXb.js";import{M as g,m as v,W as f,w as S,R as j,r as N,O as b}from"./mockData-DcwdMvmp.js";import{O as D}from"./OrdersTable-8AKnQuh_.js";import{u as O}from"./useOrderMutations-CrbFM4Lj.js";import"./SortDropdown-CUQ2zqfz.js";import"./en-US-BQ62IwJd.js";import"./isSameDay-DbedOcDv.js";import"./format-K4P4TTu3.js";import"./endOfMonth-ropScTyq.js";import"./calendar-D77CX2lA.js";import"./badge-C6OOTzUs.js";import"./orderUtils-DR-jD4b-.js";import"./date-utils-CIparGJB.js";const L=()=>{const[i,m]=s.useState("2024"),[d]=s.useState(1),[l]=s.useState(5),t=h(),{data:o,isLoading:c,isError:n,error:p}=O({page:d,limit:l}),u=(o?.data||[]).map(e=>({id:e.orderNumber||e._id,customer:{id:e.customer?.userRef?._id||"",displayName:e.customer?.userRef?.displayName||"Customer",email:e.customer?.userRef?.email||"",avatar:e.customer?.userRef?.avatar||""},driver:e.driver?{id:e.driver?.userRef?._id||"",displayName:e.driver?.userRef?.displayName||"Driver",email:e.driver?.userRef?.email||"",avatar:e.driver?.userRef?.avatar||""}:void 0,products:e.products.map(r=>({id:r.id,title:r.title,quantity:r.quantity,price:r.price,deliveryDate:r.deliveryDate,image:r.image})),date:e.createdAt,amount:e.amount,status:e.status,orderSummary:e.orderSummary?{shippingAddress:e.orderSummary.shippingAddress,proofOfDelivery:e.orderSummary.proofOfDelivery||"",paymentMethod:{type:e.orderSummary.paymentMethod.type,cardType:e.orderSummary.paymentMethod.cardType||"",cardNumber:e.orderSummary.paymentMethod.cardNumber||""},subTotal:e.orderSummary.subTotal,shippingFee:e.orderSummary.shippingFee,marketplaceFee:e.orderSummary.marketplaceFee,taxes:e.orderSummary.taxes,total:e.orderSummary.total}:void 0})),y=()=>{t("/seller/orders")},x=e=>{t(`/seller/orders/${e}`)};return a.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[a.jsx("div",{children:a.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Dashboard"})}),a.jsx(g,{metrics:v}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[a.jsx("div",{className:"min-h-[350px] lg:min-h-[400px]",children:a.jsx(f,{data:S})}),a.jsx("div",{className:"min-h-[350px] lg:min-h-[400px]",children:a.jsx(j,{data:N,selectedYear:i,onYearChange:m})})]}),c?a.jsx(b,{}):n?a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[200px] text-center",children:[a.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"Error loading orders"}),a.jsx("p",{className:"text-gray-600 text-sm",children:p?.response?.data?.message||"Failed to fetch orders. Please try again."})]})}):a.jsx(D,{title:"Latest Orders",orders:u,showSort:!1,onViewAll:y,onViewDetails:x})]})};export{L as DriverDashboard,L as default};
