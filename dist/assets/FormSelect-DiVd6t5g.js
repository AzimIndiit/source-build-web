import{r as n,j as e,b2 as B,bg as De,b4 as pt,a_ as Me,bh as ft,a$ as mt,bi as Re,b0 as ht,b3 as q,bj as xt,b1 as D,bk as oe,bl as gt,bm as Le,b6 as vt,bn as St,bo as wt,bp as yt,bq as bt,br as Ct,bs as Nt,bt as It,bu as jt,bv as Tt,Q as xe,C as Ve,bw as Pt,_ as Rt,bx as Et,q as _t,p as At,aW as Oe,ac as Se}from"./index-CUSVstqU.js";import{c as ke}from"./index-BdQq_4o_.js";import{B as he}from"./badge-c_xwgsXg.js";var Be=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Mt="VisuallyHidden",Ot=n.forwardRef((t,r)=>e.jsx(B.span,{...t,ref:r,style:{...Be,...t.style}}));Ot.displayName=Mt;var kt=[" ","Enter","ArrowUp","ArrowDown"],Dt=[" ","Enter"],ce="Select",[ye,be,Lt]=ht(ce),[ge,To]=mt(ce,[Lt,De]),Ce=De(),[Vt,ne]=ge(ce),[Bt,Ft]=ge(ce),Fe=t=>{const{__scopeSelect:r,children:o,open:u,defaultOpen:c,onOpenChange:x,value:a,defaultValue:l,onValueChange:d,dir:p,name:C,autoComplete:j,disabled:P,required:_,form:T}=t,f=Ce(r),[w,N]=n.useState(null),[S,b]=n.useState(null),[G,I]=n.useState(!1),X=pt(p),[A,F]=Me({prop:u,defaultProp:c??!1,onChange:x,caller:ce}),[H,$]=Me({prop:a,defaultProp:l,onChange:d,caller:ce}),R=n.useRef(null),U=w?T||!!w.closest("form"):!0,[W,L]=n.useState(new Set),M=Array.from(W).map(k=>k.props.value).join(";");return e.jsx(ft,{...f,children:e.jsxs(Vt,{required:_,scope:r,trigger:w,onTriggerChange:N,valueNode:S,onValueNodeChange:b,valueNodeHasChildren:G,onValueNodeHasChildrenChange:I,contentId:Re(),value:H,onValueChange:$,open:A,onOpenChange:F,dir:X,triggerPointerDownPosRef:R,disabled:P,children:[e.jsx(ye.Provider,{scope:r,children:e.jsx(Bt,{scope:t.__scopeSelect,onNativeOptionAdd:n.useCallback(k=>{L(V=>new Set(V).add(k))},[]),onNativeOptionRemove:n.useCallback(k=>{L(V=>{const z=new Set(V);return z.delete(k),z})},[]),children:o})}),U?e.jsxs(ct,{"aria-hidden":!0,required:_,tabIndex:-1,name:C,autoComplete:j,value:H,onChange:k=>$(k.target.value),disabled:P,form:T,children:[H===void 0?e.jsx("option",{value:""}):null,Array.from(W)]},M):null]})})};Fe.displayName=ce;var He="SelectTrigger",$e=n.forwardRef((t,r)=>{const{__scopeSelect:o,disabled:u=!1,...c}=t,x=Ce(o),a=ne(He,o),l=a.disabled||u,d=q(r,a.onTriggerChange),p=be(o),C=n.useRef("touch"),[j,P,_]=dt(f=>{const w=p().filter(b=>!b.disabled),N=w.find(b=>b.value===a.value),S=ut(w,f,N);S!==void 0&&a.onValueChange(S.value)}),T=f=>{l||(a.onOpenChange(!0),_()),f&&(a.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return e.jsx(xt,{asChild:!0,...x,children:e.jsx(B.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":it(a.value)?"":void 0,...c,ref:d,onClick:D(c.onClick,f=>{f.currentTarget.focus(),C.current!=="mouse"&&T(f)}),onPointerDown:D(c.onPointerDown,f=>{C.current=f.pointerType;const w=f.target;w.hasPointerCapture(f.pointerId)&&w.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(T(f),f.preventDefault())}),onKeyDown:D(c.onKeyDown,f=>{const w=j.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&P(f.key),!(w&&f.key===" ")&&kt.includes(f.key)&&(T(),f.preventDefault())})})})});$e.displayName=He;var Ue="SelectValue",We=n.forwardRef((t,r)=>{const{__scopeSelect:o,className:u,style:c,children:x,placeholder:a="",...l}=t,d=ne(Ue,o),{onValueNodeHasChildrenChange:p}=d,C=x!==void 0,j=q(r,d.onValueNodeChange);return oe(()=>{p(C)},[p,C]),e.jsx(B.span,{...l,ref:j,style:{pointerEvents:"none"},children:it(d.value)?e.jsx(e.Fragment,{children:a}):x})});We.displayName=Ue;var Ht="SelectIcon",ze=n.forwardRef((t,r)=>{const{__scopeSelect:o,children:u,...c}=t;return e.jsx(B.span,{"aria-hidden":!0,...c,ref:r,children:u||"▼"})});ze.displayName=Ht;var $t="SelectPortal",Ke=t=>e.jsx(gt,{asChild:!0,...t});Ke.displayName=$t;var ie="SelectContent",Ge=n.forwardRef((t,r)=>{const o=ne(ie,t.__scopeSelect),[u,c]=n.useState();if(oe(()=>{c(new DocumentFragment)},[]),!o.open){const x=u;return x?Le.createPortal(e.jsx(Ye,{scope:t.__scopeSelect,children:e.jsx(ye.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),x):null}return e.jsx(qe,{...t,ref:r})});Ge.displayName=ie;var K=10,[Ye,re]=ge(ie),Ut="SelectContentImpl",Wt=Ct("SelectContent.RemoveScroll"),qe=n.forwardRef((t,r)=>{const{__scopeSelect:o,position:u="item-aligned",onCloseAutoFocus:c,onEscapeKeyDown:x,onPointerDownOutside:a,side:l,sideOffset:d,align:p,alignOffset:C,arrowPadding:j,collisionBoundary:P,collisionPadding:_,sticky:T,hideWhenDetached:f,avoidCollisions:w,...N}=t,S=ne(ie,o),[b,G]=n.useState(null),[I,X]=n.useState(null),A=q(r,v=>G(v)),[F,H]=n.useState(null),[$,R]=n.useState(null),U=be(o),[W,L]=n.useState(!1),M=n.useRef(!1);n.useEffect(()=>{if(b)return wt(b)},[b]),yt();const k=n.useCallback(v=>{const[E,...s]=U().map(g=>g.ref.current),[i]=s.slice(-1),m=document.activeElement;for(const g of v)if(g===m||(g?.scrollIntoView({block:"nearest"}),g===E&&I&&(I.scrollTop=0),g===i&&I&&(I.scrollTop=I.scrollHeight),g?.focus(),document.activeElement!==m))return},[U,I]),V=n.useCallback(()=>k([F,b]),[k,F,b]);n.useEffect(()=>{W&&V()},[W,V]);const{onOpenChange:z,triggerPointerDownPosRef:Y}=S;n.useEffect(()=>{if(b){let v={x:0,y:0};const E=i=>{v={x:Math.abs(Math.round(i.pageX)-(Y.current?.x??0)),y:Math.abs(Math.round(i.pageY)-(Y.current?.y??0))}},s=i=>{v.x<=10&&v.y<=10?i.preventDefault():b.contains(i.target)||z(!1),document.removeEventListener("pointermove",E),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",E),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",s,{capture:!0})}}},[b,z,Y]),n.useEffect(()=>{const v=()=>z(!1);return window.addEventListener("blur",v),window.addEventListener("resize",v),()=>{window.removeEventListener("blur",v),window.removeEventListener("resize",v)}},[z]);const[se,de]=dt(v=>{const E=U().filter(m=>!m.disabled),s=E.find(m=>m.ref.current===document.activeElement),i=ut(E,v,s);i&&setTimeout(()=>i.ref.current.focus())}),ue=n.useCallback((v,E,s)=>{const i=!M.current&&!s;(S.value!==void 0&&S.value===E||i)&&(H(v),i&&(M.current=!0))},[S.value]),pe=n.useCallback(()=>b?.focus(),[b]),Z=n.useCallback((v,E,s)=>{const i=!M.current&&!s;(S.value!==void 0&&S.value===E||i)&&R(v)},[S.value]),fe=u==="popper"?Ne:Xe,ae=fe===Ne?{side:l,sideOffset:d,align:p,alignOffset:C,arrowPadding:j,collisionBoundary:P,collisionPadding:_,sticky:T,hideWhenDetached:f,avoidCollisions:w}:{};return e.jsx(Ye,{scope:o,content:b,viewport:I,onViewportChange:X,itemRefCallback:ue,selectedItem:F,onItemLeave:pe,itemTextRefCallback:Z,focusSelectedItem:V,selectedItemText:$,position:u,isPositioned:W,searchRef:se,children:e.jsx(bt,{as:Wt,allowPinchZoom:!0,children:e.jsx(Nt,{asChild:!0,trapped:S.open,onMountAutoFocus:v=>{v.preventDefault()},onUnmountAutoFocus:D(c,v=>{S.trigger?.focus({preventScroll:!0}),v.preventDefault()}),children:e.jsx(It,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:x,onPointerDownOutside:a,onFocusOutside:v=>v.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:e.jsx(fe,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:v=>v.preventDefault(),...N,...ae,onPlaced:()=>L(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:D(N.onKeyDown,v=>{const E=v.ctrlKey||v.altKey||v.metaKey;if(v.key==="Tab"&&v.preventDefault(),!E&&v.key.length===1&&de(v.key),["ArrowUp","ArrowDown","Home","End"].includes(v.key)){let i=U().filter(m=>!m.disabled).map(m=>m.ref.current);if(["ArrowUp","End"].includes(v.key)&&(i=i.slice().reverse()),["ArrowUp","ArrowDown"].includes(v.key)){const m=v.target,g=i.indexOf(m);i=i.slice(g+1)}setTimeout(()=>k(i)),v.preventDefault()}})})})})})})});qe.displayName=Ut;var zt="SelectItemAlignedPosition",Xe=n.forwardRef((t,r)=>{const{__scopeSelect:o,onPlaced:u,...c}=t,x=ne(ie,o),a=re(ie,o),[l,d]=n.useState(null),[p,C]=n.useState(null),j=q(r,A=>C(A)),P=be(o),_=n.useRef(!1),T=n.useRef(!0),{viewport:f,selectedItem:w,selectedItemText:N,focusSelectedItem:S}=a,b=n.useCallback(()=>{if(x.trigger&&x.valueNode&&l&&p&&f&&w&&N){const A=x.trigger.getBoundingClientRect(),F=p.getBoundingClientRect(),H=x.valueNode.getBoundingClientRect(),$=N.getBoundingClientRect();if(x.dir!=="rtl"){const m=$.left-F.left,g=H.left-m,y=A.left-g,h=A.width+y,O=Math.max(h,F.width),Q=window.innerWidth-K,le=ke(g,[K,Math.max(K,Q-O)]);l.style.minWidth=h+"px",l.style.left=le+"px"}else{const m=F.right-$.right,g=window.innerWidth-H.right-m,y=window.innerWidth-A.right-g,h=A.width+y,O=Math.max(h,F.width),Q=window.innerWidth-K,le=ke(g,[K,Math.max(K,Q-O)]);l.style.minWidth=h+"px",l.style.right=le+"px"}const R=P(),U=window.innerHeight-K*2,W=f.scrollHeight,L=window.getComputedStyle(p),M=parseInt(L.borderTopWidth,10),k=parseInt(L.paddingTop,10),V=parseInt(L.borderBottomWidth,10),z=parseInt(L.paddingBottom,10),Y=M+k+W+z+V,se=Math.min(w.offsetHeight*5,Y),de=window.getComputedStyle(f),ue=parseInt(de.paddingTop,10),pe=parseInt(de.paddingBottom,10),Z=A.top+A.height/2-K,fe=U-Z,ae=w.offsetHeight/2,v=w.offsetTop+ae,E=M+k+v,s=Y-E;if(E<=Z){const m=R.length>0&&w===R[R.length-1].ref.current;l.style.bottom="0px";const g=p.clientHeight-f.offsetTop-f.offsetHeight,y=Math.max(fe,ae+(m?pe:0)+g+V),h=E+y;l.style.height=h+"px"}else{const m=R.length>0&&w===R[0].ref.current;l.style.top="0px";const y=Math.max(Z,M+f.offsetTop+(m?ue:0)+ae)+s;l.style.height=y+"px",f.scrollTop=E-Z+f.offsetTop}l.style.margin=`${K}px 0`,l.style.minHeight=se+"px",l.style.maxHeight=U+"px",u?.(),requestAnimationFrame(()=>_.current=!0)}},[P,x.trigger,x.valueNode,l,p,f,w,N,x.dir,u]);oe(()=>b(),[b]);const[G,I]=n.useState();oe(()=>{p&&I(window.getComputedStyle(p).zIndex)},[p]);const X=n.useCallback(A=>{A&&T.current===!0&&(b(),S?.(),T.current=!1)},[b,S]);return e.jsx(Gt,{scope:o,contentWrapper:l,shouldExpandOnScrollRef:_,onScrollButtonChange:X,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:G},children:e.jsx(B.div,{...c,ref:j,style:{boxSizing:"border-box",maxHeight:"100%",...c.style}})})})});Xe.displayName=zt;var Kt="SelectPopperPosition",Ne=n.forwardRef((t,r)=>{const{__scopeSelect:o,align:u="start",collisionPadding:c=K,...x}=t,a=Ce(o);return e.jsx(jt,{...a,...x,ref:r,align:u,collisionPadding:c,style:{boxSizing:"border-box",...x.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ne.displayName=Kt;var[Gt,Ee]=ge(ie,{}),Ie="SelectViewport",Ze=n.forwardRef((t,r)=>{const{__scopeSelect:o,nonce:u,...c}=t,x=re(Ie,o),a=Ee(Ie,o),l=q(r,x.onViewportChange),d=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:u}),e.jsx(ye.Slot,{scope:o,children:e.jsx(B.div,{"data-radix-select-viewport":"",role:"presentation",...c,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...c.style},onScroll:D(c.onScroll,p=>{const C=p.currentTarget,{contentWrapper:j,shouldExpandOnScrollRef:P}=a;if(P?.current&&j){const _=Math.abs(d.current-C.scrollTop);if(_>0){const T=window.innerHeight-K*2,f=parseFloat(j.style.minHeight),w=parseFloat(j.style.height),N=Math.max(f,w);if(N<T){const S=N+_,b=Math.min(T,S),G=S-b;j.style.height=b+"px",j.style.bottom==="0px"&&(C.scrollTop=G>0?G:0,j.style.justifyContent="flex-end")}}}d.current=C.scrollTop})})})]})});Ze.displayName=Ie;var Qe="SelectGroup",[Yt,qt]=ge(Qe),Xt=n.forwardRef((t,r)=>{const{__scopeSelect:o,...u}=t,c=Re();return e.jsx(Yt,{scope:o,id:c,children:e.jsx(B.div,{role:"group","aria-labelledby":c,...u,ref:r})})});Xt.displayName=Qe;var Je="SelectLabel",Zt=n.forwardRef((t,r)=>{const{__scopeSelect:o,...u}=t,c=qt(Je,o);return e.jsx(B.div,{id:c.id,...u,ref:r})});Zt.displayName=Je;var we="SelectItem",[Qt,et]=ge(we),tt=n.forwardRef((t,r)=>{const{__scopeSelect:o,value:u,disabled:c=!1,textValue:x,...a}=t,l=ne(we,o),d=re(we,o),p=l.value===u,[C,j]=n.useState(x??""),[P,_]=n.useState(!1),T=q(r,S=>d.itemRefCallback?.(S,u,c)),f=Re(),w=n.useRef("touch"),N=()=>{c||(l.onValueChange(u),l.onOpenChange(!1))};if(u==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Qt,{scope:o,value:u,disabled:c,textId:f,isSelected:p,onItemTextChange:n.useCallback(S=>{j(b=>b||(S?.textContent??"").trim())},[]),children:e.jsx(ye.ItemSlot,{scope:o,value:u,disabled:c,textValue:C,children:e.jsx(B.div,{role:"option","aria-labelledby":f,"data-highlighted":P?"":void 0,"aria-selected":p&&P,"data-state":p?"checked":"unchecked","aria-disabled":c||void 0,"data-disabled":c?"":void 0,tabIndex:c?void 0:-1,...a,ref:T,onFocus:D(a.onFocus,()=>_(!0)),onBlur:D(a.onBlur,()=>_(!1)),onClick:D(a.onClick,()=>{w.current!=="mouse"&&N()}),onPointerUp:D(a.onPointerUp,()=>{w.current==="mouse"&&N()}),onPointerDown:D(a.onPointerDown,S=>{w.current=S.pointerType}),onPointerMove:D(a.onPointerMove,S=>{w.current=S.pointerType,c?d.onItemLeave?.():w.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:D(a.onPointerLeave,S=>{S.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:D(a.onKeyDown,S=>{d.searchRef?.current!==""&&S.key===" "||(Dt.includes(S.key)&&N(),S.key===" "&&S.preventDefault())})})})})});tt.displayName=we;var ve="SelectItemText",ot=n.forwardRef((t,r)=>{const{__scopeSelect:o,className:u,style:c,...x}=t,a=ne(ve,o),l=re(ve,o),d=et(ve,o),p=Ft(ve,o),[C,j]=n.useState(null),P=q(r,N=>j(N),d.onItemTextChange,N=>l.itemTextRefCallback?.(N,d.value,d.disabled)),_=C?.textContent,T=n.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:_},d.value),[d.disabled,d.value,_]),{onNativeOptionAdd:f,onNativeOptionRemove:w}=p;return oe(()=>(f(T),()=>w(T)),[f,w,T]),e.jsxs(e.Fragment,{children:[e.jsx(B.span,{id:d.textId,...x,ref:P}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Le.createPortal(x.children,a.valueNode):null]})});ot.displayName=ve;var nt="SelectItemIndicator",rt=n.forwardRef((t,r)=>{const{__scopeSelect:o,...u}=t;return et(nt,o).isSelected?e.jsx(B.span,{"aria-hidden":!0,...u,ref:r}):null});rt.displayName=nt;var je="SelectScrollUpButton",st=n.forwardRef((t,r)=>{const o=re(je,t.__scopeSelect),u=Ee(je,t.__scopeSelect),[c,x]=n.useState(!1),a=q(r,u.onScrollButtonChange);return oe(()=>{if(o.viewport&&o.isPositioned){let l=function(){const p=d.scrollTop>0;x(p)};const d=o.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[o.viewport,o.isPositioned]),c?e.jsx(lt,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=o;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});st.displayName=je;var Te="SelectScrollDownButton",at=n.forwardRef((t,r)=>{const o=re(Te,t.__scopeSelect),u=Ee(Te,t.__scopeSelect),[c,x]=n.useState(!1),a=q(r,u.onScrollButtonChange);return oe(()=>{if(o.viewport&&o.isPositioned){let l=function(){const p=d.scrollHeight-d.clientHeight,C=Math.ceil(d.scrollTop)<p;x(C)};const d=o.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[o.viewport,o.isPositioned]),c?e.jsx(lt,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=o;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});at.displayName=Te;var lt=n.forwardRef((t,r)=>{const{__scopeSelect:o,onAutoScroll:u,...c}=t,x=re("SelectScrollButton",o),a=n.useRef(null),l=be(o),d=n.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return n.useEffect(()=>()=>d(),[d]),oe(()=>{l().find(C=>C.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),e.jsx(B.div,{"aria-hidden":!0,...c,ref:r,style:{flexShrink:0,...c.style},onPointerDown:D(c.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(u,50))}),onPointerMove:D(c.onPointerMove,()=>{x.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(u,50))}),onPointerLeave:D(c.onPointerLeave,()=>{d()})})}),Jt="SelectSeparator",eo=n.forwardRef((t,r)=>{const{__scopeSelect:o,...u}=t;return e.jsx(B.div,{"aria-hidden":!0,...u,ref:r})});eo.displayName=Jt;var Pe="SelectArrow",to=n.forwardRef((t,r)=>{const{__scopeSelect:o,...u}=t,c=Ce(o),x=ne(Pe,o),a=re(Pe,o);return x.open&&a.position==="popper"?e.jsx(Tt,{...c,...u,ref:r}):null});to.displayName=Pe;var oo="SelectBubbleInput",ct=n.forwardRef(({__scopeSelect:t,value:r,...o},u)=>{const c=n.useRef(null),x=q(u,c),a=vt(r);return n.useEffect(()=>{const l=c.current;if(!l)return;const d=window.HTMLSelectElement.prototype,C=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==r&&C){const j=new Event("change",{bubbles:!0});C.call(l,r),l.dispatchEvent(j)}},[a,r]),e.jsx(B.select,{...o,style:{...Be,...o.style},ref:x,defaultValue:r})});ct.displayName=oo;function it(t){return t===""||t===void 0}function dt(t){const r=St(t),o=n.useRef(""),u=n.useRef(0),c=n.useCallback(a=>{const l=o.current+a;r(l),(function d(p){o.current=p,window.clearTimeout(u.current),p!==""&&(u.current=window.setTimeout(()=>d(""),1e3))})(l)},[r]),x=n.useCallback(()=>{o.current="",window.clearTimeout(u.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(u.current),[]),[o,c,x]}function ut(t,r,o){const c=r.length>1&&Array.from(r).every(p=>p===r[0])?r[0]:r,x=o?t.indexOf(o):-1;let a=no(t,Math.max(x,0));c.length===1&&(a=a.filter(p=>p!==o));const d=a.find(p=>p.textValue.toLowerCase().startsWith(c.toLowerCase()));return d!==o?d:void 0}function no(t,r){return t.map((o,u)=>t[(r+u)%t.length])}var ro=Fe,so=$e,ao=We,lo=ze,co=Ke,io=Ge,uo=Ze,po=tt,fo=ot,mo=rt,ho=st,xo=at;function go({...t}){return e.jsx(ro,{"data-slot":"select",...t})}function vo({...t}){return e.jsx(ao,{"data-slot":"select-value",...t})}function So({className:t,size:r="default",children:o,...u}){return e.jsxs(so,{"data-slot":"select-trigger","data-size":r,className:xe("border-[#DFDFDF] data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-primary/30 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-sm border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r==="default"&&"h-16",r==="sm"&&"h-8",t),...u,children:[o,e.jsx(lo,{asChild:!0,children:e.jsx(Ve,{className:"size-4 opacity-50"})})]})}function wo({className:t,children:r,position:o="popper",...u}){return e.jsx(co,{children:e.jsxs(io,{"data-slot":"select-content",className:xe("bg-white border-none text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-[9999] max-h-[var(--radix-select-content-available-height)] min-w-[8rem] origin-[var(--radix-select-content-transform-origin)] overflow-x-hidden overflow-y-auto rounded-sm border shadow-md",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,...u,children:[e.jsx(bo,{}),e.jsx(uo,{className:xe("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),e.jsx(Co,{})]})})}function yo({className:t,children:r,...o}){return e.jsxs(po,{"data-slot":"select-item",className:xe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...o,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(mo,{children:e.jsx(Pt,{className:"size-4"})})}),e.jsx(fo,{children:r})]})}function bo({className:t,...r}){return e.jsx(ho,{"data-slot":"select-scroll-up-button",className:xe("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(Rt,{className:"size-4"})})}function Co({className:t,...r}){return e.jsx(xo,{"data-slot":"select-scroll-down-button",className:xe("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(Ve,{className:"size-4"})})}const Po=({name:t,label:r,placeholder:o,options:u,searchable:c=!1,searchPlaceholder:x="Search options...",optionsPerPage:a=10,disabled:l=!1,multiple:d=!1,maxSelections:p,showSelectAll:C=!1,customError:j,creatable:P=!1,createPlaceholder:_='Create "{search}"',onCreateOption:T,className:f=""})=>{const w=Et();w||console.error("FormSelect must be used within a FormProvider");const{control:N,watch:S,formState:{errors:b}}=w||{control:void 0,watch:()=>{},formState:{errors:{}}},G=S(t);console.log("fieldValue",G,t),console.log("form context exists:",!!w);const[I,X]=n.useState(""),[A,F]=n.useState(a),[H,$]=n.useState(!1),[R,U]=n.useState(u),W=n.useRef(null),L=b[t]||j;n.useEffect(()=>{console.log(`FormSelect ${t} - options updated:`,u.length,"options"),U(u)},[u,t]),n.useEffect(()=>{F(a)},[I,a]);const M=n.useMemo(()=>!c||!I.trim()?R:R.filter(i=>i.label.toLowerCase().includes(I.toLowerCase())||i.value.toLowerCase().includes(I.toLowerCase())),[R,I,c]),k=n.useMemo(()=>M.slice(0,A),[M,A]),V=A<M.length,z=(s,i)=>{i(s),X(""),$(!1)},Y=(s,i,m)=>{const g=i.includes(s)?i.filter(y=>y!==s):p&&i.length>=p?i:[...i,s];m(g)},se=(s,i,m)=>{const g=i.filter(y=>y!==s);m(g)},de=(s,i)=>{const m=M.map(y=>y.value);if(m.every(y=>s.includes(y))){const y=s.filter(h=>!m.includes(h));i(y)}else{const y=[...new Set([...s,...m])];p&&y.length>p?i(y.slice(0,p)):i(y)}},ue=s=>{s.stopPropagation(),X(s.target.value)},pe=s=>{s.stopPropagation()},Z=s=>{const i=s.target,{scrollTop:m,scrollHeight:g,clientHeight:y}=i;g-m-y<50&&V&&F(h=>Math.min(h+a,M.length))},fe=s=>d?(Array.isArray(s)?s:[]).map(m=>R.find(g=>g.value===m)?.label||m):[],ae=s=>{s([])},v=(s,i,m)=>{const g=s.trim();if(!g)return;if(!R.some(h=>h.value.toLowerCase()===g.toLowerCase()||h.label.toLowerCase()===g.toLowerCase())){const h={value:g.toLowerCase().replace(/\s+/g,"-"),label:g};if(U(O=>[...O,h]),d){const O=Array.isArray(i)?i:[];m([...O,h.value])}else m(h.value);T&&T(g),X(""),d||$(!1)}},E=s=>{const i=Array.isArray(s.value)?s.value:[],m=fe(i);if(i.length===0)return e.jsx("span",{className:"text-gray-500",children:o});const g=2,y=5,h=3,O=m.slice(0,g),Q=m.slice(0,y),le=m.slice(0,h),me=i.length-g,_e=i.length-y,Ae=i.length-h;return e.jsxs("div",{className:"flex items-center w-full gap-1",children:[e.jsxs("div",{className:"flex flex-wrap gap-1 flex-1 min-w-0 items-center",children:[e.jsxs("div",{className:"flex gap-1 items-center sm:hidden",children:[O.map((J,ee)=>e.jsxs(he,{variant:"secondary",className:"text-xs inline-flex items-center gap-0.5 px-2 py-1 rounded-md bg-primary/10 max-w-[100px] group",children:[e.jsx("span",{className:"truncate flex-1 min-w-0",children:J}),e.jsx("button",{type:"button",className:"ml-0.5 p-0.5 hover:bg-red-200/50 rounded-sm transition-colors duration-150 inline-flex items-center justify-center flex-shrink-0",onClick:te=>{te.preventDefault(),te.stopPropagation(),se(i[ee],i,s.onChange)},tabIndex:-1,children:e.jsx(Se,{size:12,className:"text-gray-500 hover:text-red-600"})})]},i[ee])),me>0&&e.jsxs(he,{variant:"outline",className:"text-xs px-2 py-1 rounded-md whitespace-nowrap",children:["+",me," more"]})]}),e.jsxs("div",{className:"hidden sm:flex lg:hidden gap-1 items-center",children:[Q.map((J,ee)=>e.jsxs(he,{variant:"secondary",className:"text-xs inline-flex items-center gap-0.5 px-2 py-1 rounded-md bg-primary/10 max-w-[120px] group",children:[e.jsx("span",{className:"truncate flex-1 min-w-0",children:J}),e.jsx("button",{type:"button",className:"ml-0.5 p-0.5 hover:bg-red-200/50 rounded-sm transition-colors duration-150 inline-flex items-center justify-center flex-shrink-0",onClick:te=>{te.preventDefault(),te.stopPropagation(),se(i[ee],i,s.onChange)},tabIndex:-1,children:e.jsx(Se,{size:12,className:"text-gray-500 hover:text-red-600"})})]},i[ee])),_e>0&&e.jsxs(he,{variant:"outline",className:"text-xs px-2 py-1 rounded-md whitespace-nowrap",children:["+",_e," more"]})]}),e.jsxs("div",{className:"hidden lg:flex gap-1 items-center",children:[le.map((J,ee)=>e.jsxs(he,{variant:"secondary",className:"text-xs inline-flex items-center gap-0.5 px-2 py-1 rounded-md bg-primary/10 max-w-[120px] group",children:[e.jsx("span",{className:"truncate flex-1 min-w-0",children:J}),e.jsx("button",{type:"button",className:"ml-0.5 p-0.5 hover:bg-red-200/50 rounded-sm transition-colors duration-150 inline-flex items-center justify-center flex-shrink-0",onClick:te=>{te.preventDefault(),te.stopPropagation(),se(i[ee],i,s.onChange)},tabIndex:-1,children:e.jsx(Se,{size:12,className:"text-gray-500 hover:text-red-600"})})]},i[ee])),Ae>0&&e.jsxs(he,{variant:"outline",className:"text-xs px-2 py-1 rounded-md whitespace-nowrap",children:["+",Ae," more"]})]})]}),i.length>0&&e.jsx("button",{type:"button",className:"p-1 hover:bg-red-100 rounded-sm transition-colors duration-150 flex items-center justify-center flex-shrink-0",onClick:J=>{J.preventDefault(),J.stopPropagation(),ae(s.onChange)},title:"Clear all selections",tabIndex:-1,children:e.jsx(Se,{size:16,className:"text-gray-400 hover:text-red-600"})})]})};return e.jsxs("div",{className:"w-full",children:[r&&e.jsx(_t,{htmlFor:t,className:"",children:r}),N?e.jsx(At,{name:t,control:N,render:({field:s})=>{const i=d?null:R.find(h=>h.value===s.value);let m=k;if(console.log("finalVisibleOptions",m),!d&&i&&(k.some(O=>O.value===s.value)||(m=[i,...k])),d)return e.jsxs("div",{className:"relative",children:[e.jsx("div",{ref:s.ref,id:t,className:`${r?"mt-2":""} rounded-sm w-full min-h-[40px] px-3 py-1.5 border cursor-pointer flex items-center ${L?"border-red-500":"border-gray-300"} ${l?"bg-gray-100 cursor-not-allowed":"bg-white hover:border-gray-400"} ${f}`,onClick:()=>!l&&$(!H),children:E(s)}),H&&!l&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-sm shadow-lg",children:[c&&e.jsx("div",{className:"p-2 border-b border-gray-200",onClick:h=>h.stopPropagation(),children:e.jsx(Oe,{type:"text",placeholder:x,value:I,onChange:ue,onKeyDown:pe,className:"h-8 rounded-sm",autoFocus:!0,autoComplete:"off"})}),C&&M.length>0&&e.jsx("div",{className:"p-2 border-b border-gray-200 cursor-pointer hover:bg-gray-50 text-sm font-medium",onClick:()=>de(Array.isArray(s.value)?s.value:[],s.onChange),children:M.every(h=>(Array.isArray(s.value)?s.value:[]).includes(h.value))?"Deselect All":"Select All"}),e.jsxs("div",{ref:W,onScroll:Z,className:"max-h-60 overflow-y-auto",children:[P&&I&&M.length===0&&e.jsx("div",{className:"p-2 cursor-pointer hover:bg-blue-50 text-blue-600 flex items-center gap-2 border-b",onClick:()=>v(I,Array.isArray(s.value)?s.value:[],s.onChange),children:e.jsx("span",{className:"flex-1",children:_.replace("{search}",I)})}),m.length>0?e.jsxs(e.Fragment,{children:[m.map(h=>{const O=Array.isArray(s.value)?s.value:[],Q=O.includes(h.value),le=p&&O.length>=p,me=!Q&&le;return e.jsxs("div",{className:`p-2 flex items-center gap-2 ${me?"opacity-50 cursor-not-allowed bg-gray-50":"cursor-pointer hover:bg-gray-50"} ${Q?"bg-blue-50 text-primary":""}`,onClick:()=>{me||Y(h.value,O,s.onChange)},children:[e.jsx("input",{type:"checkbox",checked:Q,disabled:me?!0:void 0,onChange:()=>{},className:"rounded"}),e.jsx("span",{className:"flex-1",children:h.label})]},h.value)}),V&&e.jsxs("div",{className:"p-2 text-xs text-gray-400 text-center border-t",children:["Scroll for more options... (",M.length-A," ","remaining)"]})]}):!P&&c&&I&&e.jsxs("div",{className:"p-2 text-sm text-gray-500 text-center",children:['No options found for "',I,'"']})]}),p&&e.jsx("div",{className:"p-2 border-t border-gray-200 text-xs text-gray-500 text-center",children:(()=>{const h=Array.isArray(s.value)?s.value.length:0,O=p-h;return h===p?`Maximum ${p} tags selected`:h>0?`${h} selected • ${O} more available`:`Select up to ${p} tags`})()})]}),H&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>$(!1)})]});console.log("field.value ",s.value,t),console.log("available options:",R);const g=s.value?String(s.value):"";let y="";return g&&(P?(y=g,R.some(h=>h.value===g)||R.push({value:g,label:g})):y=R.some(O=>O.value===g)?g:""),console.log("Select value:",g,"final value:",y,"creatable:",P),e.jsxs(go,{onValueChange:h=>z(h,s.onChange),value:y,disabled:l,children:[e.jsx(So,{id:t,ref:s.ref,className:`${r?"mt-2":""} rounded-sm w-full ${L?"border-red-500":"border-gray-300"} ${f}`,disabled:l,children:e.jsx(vo,{placeholder:o||"Select an option"})}),e.jsxs(wo,{className:"w-full bg-white",children:[c&&!l&&e.jsx("div",{className:"p-2 border-b border-gray-200",onClick:h=>h.stopPropagation(),children:e.jsx(Oe,{type:"text",placeholder:x,value:I,onChange:ue,onKeyDown:pe,className:"h-8 rounded-sm",autoFocus:!0,autoComplete:"off"})}),e.jsx("div",{ref:W,onScroll:Z,className:"max-h-60 overflow-y-auto",children:m.length>0?e.jsxs(e.Fragment,{children:[m.map(h=>e.jsx(yo,{value:h.value,className:"hover:bg-gray-100 cursor-pointer",children:h.label},h.value)),V&&e.jsxs("div",{className:"p-2 text-xs text-gray-400 text-center border-t",children:["Scroll for more options... (",M.length-A," ","remaining)"]})]}):c&&I&&e.jsxs("div",{className:"p-2 text-sm text-gray-500 text-center",children:['No options found for "',I,'"']})})]})]},`${t}-${y}-${R.length}`)}}):e.jsx("div",{className:"text-red-500 text-xs",children:"FormSelect must be used within a FormProvider"}),L&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:L.message?.toString()})]})};export{Po as F};
