import{u as z,r as a,j as t}from"./index-CUSVstqU.js";import{O as B}from"./OrdersTable-CwWRM3zg.js";import{P as G}from"./pagination-wrapper-Caj-HnEp.js";import{a as J}from"./useOrderMutations-CL6oNQvb.js";import{S as K}from"./SellerOrdersPageSkeleton--K0ktxCX.js";import{S as N}from"./SortDropdown-BZ2QEsue.js";import{t as U,O as P}from"./orderTransformers-DSlKWA6p.js";import{E as X}from"./EmptyState-CH6fPGhV.js";import{O as Z}from"./orderEmptyState-Bba5zfCx.js";import"./table-DneWR9W7.js";import"./badge-c_xwgsXg.js";import"./orderUtils-DR-jD4b-.js";import"./date-utils-CIparGJB.js";import"./en-US-CPLesiGp.js";import"./isSameDay-CeY-boyx.js";import"./format-Byp0gi1d.js";import"./endOfMonth-B0jjArdg.js";const xt=()=>{const M=z(),[d,g]=a.useState(1),[p]=a.useState(10),[l,k]=a.useState("recent"),[x,C]=a.useState(),[o,v]=a.useState({orderStatus:"",pricing:""}),u=a.useCallback((e,r,s)=>{const y=new Date;let n,O,h="-createdAt";if(r)switch(r){case"high-to-low":h="-amount";break;case"low-to-high":h="amount";break}else switch(e){case"custom":if(s){const A=s.from.getFullYear(),V=String(s.from.getMonth()+1).padStart(2,"0"),q=String(s.from.getDate()).padStart(2,"0");n=`${A}-${V}-${q}`;const L=s.to.getFullYear(),Q=String(s.to.getMonth()+1).padStart(2,"0"),W=String(s.to.getDate()).padStart(2,"0");O=`${L}-${Q}-${W}`}break;case"this-week":const i=new Date;i.setDate(i.getDate()-i.getDay()),i.setHours(0,0,0,0),n=i.toISOString().split("T")[0];break;case"this-month":const b=new Date(y.getFullYear(),y.getMonth(),1);b.setHours(0,0,0,0),n=b.toISOString().split("T")[0];break;case"last-3-months":const c=new Date;c.setMonth(c.getMonth()-3),c.setHours(0,0,0,0),n=c.toISOString().split("T")[0];break;case"last-6-months":const m=new Date;m.setMonth(m.getMonth()-6),m.setHours(0,0,0,0),n=m.toISOString().split("T")[0];break}return{startDate:n,endDate:O,sort:h}},[]),F=a.useMemo(()=>{const{startDate:e,endDate:r,sort:s}=u(l,o.pricing,x);return{page:d,limit:p,...e&&{startDate:e},...r&&{endDate:r},...s&&{sort:s},...o.orderStatus&&{status:o.orderStatus}}},[d,p,l,o,x,u]),{data:S,isLoading:E,isError:$,error:Y}=J(F),I=e=>{M(`/seller/orders/${e}`)},T=e=>{g(e)},f=(e,r)=>{k(e),C(r),g(1)},j=e=>{v(e),g(1)};if(E)return t.jsx(K,{});if($)return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[t.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"Error loading orders"}),t.jsx("p",{className:"text-gray-600 text-sm",children:Y?.response?.data?.message||"Failed to fetch orders. Please try again."})]});const H=S?.data||[],D=U(H),w=S?.pagination?.totalPages||1;return D.length?t.jsxs("div",{className:"py-4 md:p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Orders"}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[t.jsx(N,{selectedSort:l,onSortChange:f}),t.jsx(P,{filters:o,onFilterChange:j})]})]}),t.jsx(B,{orders:D,onViewDetails:I,showSort:!1,showFilter:!1}),w>1&&t.jsx(G,{currentPage:d,totalPages:w,onPageChange:T})]}):t.jsxs("div",{className:"py-4 md:p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Orders"}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[t.jsx(N,{selectedSort:l,onSortChange:f}),t.jsx(P,{filters:o,onFilterChange:j})]})]}),t.jsx(X,{title:"No orders found",description:"You don't have any orders yet.",icon:t.jsx("img",{src:Z,className:"w-64 h-56"}),className:"min-h-[400px]"})]})};export{xt as default};
