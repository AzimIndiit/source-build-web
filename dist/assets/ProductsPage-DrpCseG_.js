import{V as ne,r as d,j as e,af as re,ag as ce,aD as oe,aE as de,b8 as ae,aF as me,q as Q,aN as W,B as C,aO as Y,X as _,f as ie,K as xe,N as he,Z as ge,bc as pe,S as o,u as ue,D as Z,b as G,M as X,C as J,c as ee,d as se,e as R,z as fe}from"./index-CUSVstqU.js";import{P as ye}from"./pagination-wrapper-Caj-HnEp.js";import{F as q}from"./FilterDropdown-CdlgF2Po.js";import{g as je,h as be,u as Ne,a as ve}from"./useProductMutations-CP-SVJ5v.js";import"./PickupHoursSelector-C2PCOgFr.js";import{B}from"./badge-c_xwgsXg.js";import{g as we}from"./orderUtils-DR-jD4b-.js";import{A as ke,a as Se}from"./alert-BvYMB8P9.js";import{C as le}from"./circle-alert-CpzCXbnG.js";import{M as te}from"./minus-Cdk7QGCs.js";import{L as Ce}from"./layers-DUzS6LzX.js";import{T as Pe}from"./trash-2-BLdsFbCa.js";import{f as De}from"./format-Byp0gi1d.js";import{P as Me}from"./productEmptyState-B0Qq07aF.js";import{E as Ae}from"./EmptyState-CH6fPGhV.js";import"./index-BdQq_4o_.js";import"./en-US-CPLesiGp.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Oe=ne("box",Fe),Te=({isOpen:a,onClose:b,product:n,onUpdateStock:U})=>{const[m,x]=d.useState(0),[y,P]=d.useState(!1),[c,N]=d.useState([]),[u,v]=d.useState([]),[h,D]=d.useState(!1),[M,j]=d.useState(""),[I,F]=d.useState(!1),[w,A]=d.useState(null);d.useEffect(()=>{n&&(x(n.quantity||0),P(n.outOfStock||!1),n.variants&&(N(n.variants.map(t=>t.quantity||0)),v(n.variants.map(t=>t.outOfStock||!1))),j(""))},[n]);const z=t=>{if(t===""){x(0),j("");return}const i=t.replace(/\D/g,""),s=parseInt(i,10)||0;x(s),j("")},O=(t,i)=>{if(i===""){const E=[...c];E[t]=0,N(E),j("");return}const s=i.replace(/\D/g,""),r=parseInt(s,10)||0,L=[...c];L[t]=r,N(L),j("")},l=()=>{x(t=>t+1)},g=()=>{m>0&&x(t=>t-1)},f=t=>{const i=[...c];i[t]=(i[t]||0)+1,N(i)},k=t=>{if(c[t]>0){const i=[...c];i[t]=i[t]-1,N(i)}},$=()=>{A("update"),F(!0)},V=async()=>{if(!(!n||!w)){D(!0),j(""),F(!1);try{const t=n.id||n._id||"";if(w==="update"){const i=n.variants?c.map((s,r)=>({index:r,quantity:s,outOfStock:u[r]})):void 0;await U(t,m,i,y)}b()}catch(t){j("Failed to update stock. Please try again."),console.error("Stock update error:",t)}finally{D(!1),A(null)}}},T=()=>{if(!n)return"";if(w==="update")return e.jsxs("div",{children:[e.jsxs("p",{children:["You are about to update the stock for ",e.jsx("strong",{children:n.title}),":"]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("p",{children:["• Main Stock: ",e.jsx("strong",{children:m})," units"]}),n.variants&&n.variants.length>0&&e.jsxs("p",{children:["• ",n.variants.length," variant(s) will also be updated"]})]})]});if(w==="out-of-stock")return e.jsxs("div",{children:[e.jsxs("p",{children:["This will mark ",e.jsx("strong",{children:n.title})," as completely out of stock:"]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("p",{children:["• Main stock will be set to ",e.jsx("strong",{children:"0"})]}),S&&e.jsxs("p",{children:["• All ",n.variants?.length," variant(s) will be set to ",e.jsx("strong",{children:"0"})]})]})]});if(w==="in-stock"){const t=c.filter(i=>i===0).length;return e.jsxs("div",{children:[e.jsxs("p",{children:["This will restore stock for ",e.jsx("strong",{children:n.title}),":"]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[m===0&&e.jsxs("p",{children:["• Main stock: 0 → ",e.jsx("strong",{children:"10"})," units"]}),m>0&&e.jsxs("p",{children:["• Main stock: ",e.jsx("strong",{children:m})," units (unchanged)"]}),S&&t>0&&e.jsxs("p",{children:["• ",t," variant(s) with 0 stock → ",e.jsx("strong",{children:"10"})," units each"]}),S&&c.filter(i=>i>0).length>0&&e.jsxs("p",{children:["• ",c.filter(i=>i>0).length," variant(s) will keep their current stock"]})]})]})}return""};if(!n)return null;const S=n.variants&&n.variants.length>0;return m>0||S&&c.some(t=>t>0),m===0&&(!S||c.every(t=>t===0)),e.jsxs(e.Fragment,{children:[e.jsx(re,{open:a,onOpenChange:b,children:e.jsxs(ce,{className:"w-[95vw] max-w-[95vw] sm:w-full sm:max-w-2xl lg:max-w-4xl bg-white max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(oe,{className:"sm:space-y-3",children:[e.jsxs(de,{className:"flex items-center gap-2 text-xl",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(ae,{className:"w-5 h-5 text-primary"})}),e.jsx("span",{children:"Inventory Management"})]}),e.jsxs(me,{className:"text-gray-600",children:["Manage stock levels for"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:n.title})]})]}),e.jsxs("div",{className:"space-y-5 sm:py-4",children:[M&&e.jsxs(ke,{variant:"destructive",className:"rounded-lg",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx(Se,{className:"font-medium",children:M})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg sm:rounded-xl p-3 sm:p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{htmlFor:"main-stock",className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-gray-500"}),"Main Stock Quantity"]}),e.jsx("div",{className:"flex items-center justify-end text-xs text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx(Q,{htmlFor:"main-out-of-stock",className:"text-[10px] text-gray-600",children:"Out of Stock"}),e.jsx(W,{id:"main-out-of-stock",className:"h-6 w-12",checked:y,onCheckedChange:t=>{P(t)}})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(C,{type:"button",variant:"outline",size:"icon",onClick:g,disabled:h||m===0||y,className:"h-10 w-10 sm:h-12 sm:w-12 rounded-lg sm:rounded-xl border hover:bg-gray-100 hover:border-gray-300 transition-all",children:e.jsx(te,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("input",{id:"main-stock",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:m,onChange:t=>z(t.target.value),disabled:h||y,className:"flex-1 text-center text-lg sm:text-2xl font-semibold h-10 sm:h-12 rounded-lg sm:rounded-xl border focus:border-blue-500 transition-all focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-offset-0",onKeyPress:t=>{/[0-9]/.test(t.key)||t.preventDefault()}}),e.jsx(C,{type:"button",variant:"outline",size:"icon",onClick:l,disabled:h||y,className:"h-10 w-10 sm:h-12 sm:w-12 rounded-lg sm:rounded-xl border hover:bg-gray-100 hover:border-gray-300 transition-all",children:e.jsx(Y,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),S&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Q,{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4 text-gray-500"}),"Variant Stock"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3",children:n.variants?.map((t,i)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 space-y-2 hover:border-gray-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-md border-2 border-gray-200 flex-shrink-0",style:{backgroundColor:t.color.toLowerCase()==="white"?"#f9fafb":t.color.toLowerCase()}}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 truncate",children:t.color}),e.jsxs("span",{className:"text-xs text-gray-500",children:["$",t.price]})]})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{htmlFor:`variant-out-of-stock-${i}`,className:"text-[10px] text-gray-600",children:"Out of Stock"}),e.jsx(W,{id:`variant-out-of-stock-${i}`,className:"h-6 w-12",checked:u[i]||!1,onCheckedChange:s=>{const r=[...u];r[i]=s,v(r)}})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{type:"button",variant:"outline",size:"icon",onClick:()=>k(i),disabled:h||c[i]===0||u[i],className:"h-8 w-8 rounded-sm hover:bg-gray-50 transition-all p-0",children:e.jsx(te,{className:"h-3 w-3"})}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:c[i]||0,onChange:s=>O(i,s.target.value),disabled:h||u[i],className:"flex-1 text-center h-8 text-xs sm:text-sm font-medium rounded-sm border focus:border-primary transition-all focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-offset-0 min-w-[40px]",onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()}}),e.jsx(C,{type:"button",variant:"outline",size:"icon",onClick:()=>f(i),disabled:h||u[i],className:"h-8 w-8 rounded-sm hover:bg-gray-50 transition-all p-0",children:e.jsx(Y,{className:"h-3 w-3"})})]})]},i))})]})]}),e.jsxs("div",{className:"flex justify-center sm:justify-end flex-row gap-2 sm:gap-2 py-4 border-t border-gray-200 ",children:[e.jsx(C,{type:"button",variant:"outline",onClick:b,disabled:h,className:" px-6 text-gray-700 hover:text-gray-900 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all rounded-lg w-[180px] sm:w-[124px]",children:"Cancel"}),e.jsx(C,{type:"button",onClick:$,disabled:h,className:_(" px-6  text-white rounded-lg  w-[180px] sm:w-[124px] transition-all",h&&"opacity-70"),children:h?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Stock"})]})]})}),e.jsx(ie,{isOpen:I,onClose:()=>{F(!1),A(null)},onConfirm:V,title:"Confirm Stock Update",description:T(),confirmText:"Yes, Update Stock",cancelText:"Cancel",isLoading:h})]})},Le=({product:a,onProductClick:b,onEditProduct:n,onDeleteProduct:U})=>{const[m,x]=d.useState(!1),[y,P]=d.useState(!1),c=je(),N=be(),u=a.id||a._id||"",v=a.status==="active",h=()=>{let l=0,g=!1,f=!0;return a.outOfStock||(f=!1,a.quantity>0&&(l+=a.quantity,g=!0)),a.variants&&a.variants.length>0&&a.variants.forEach(k=>{k.outOfStock||(f=!1,k.quantity>0&&(l+=k.quantity,g=!0))}),f?{totalStock:0,hasAnyStock:!1,isOutOfStock:!0}:{totalStock:l,hasAnyStock:g,isOutOfStock:!1}},{totalStock:D,hasAnyStock:M,isOutOfStock:j}=h(),I=async l=>{if(!m){x(!0);try{await c.mutateAsync({id:u,status:l?"active":"inactive"})}catch(g){console.error("Failed to update product status:",g)}finally{x(!1)}}},F=async(l,g,f,k)=>{await N.mutateAsync({id:l,quantity:g,variants:f,outOfStock:k})},w=l=>{l.stopPropagation(),P(!0)},A=l=>{try{return De(new Date(l),"dd/MM/yyyy")}catch{return l}},z=l=>{if(l.locationIds&&l.locationIds.length>0){const g=l.locationIds[0];if(typeof g=="object"&&g.city){const f=`${g.city}, ${g.state||""}`.trim();return f.length>30?f.slice(0,30)+"...":f}}return"Location not specified"},O=l=>l.images&&l.images.length>0?l.images[0]:"https://placehold.co/300x200.png";return console.log("product.priceType",a.priceType),e.jsxs(e.Fragment,{children:[e.jsxs(xe,{className:_("overflow-hidden border border-gray-200 rounded-xl hover:shadow-md transition-shadow p-0 cursor-pointer group gap-0",a.status==="inactive"&&"grayscale"),onClick:()=>b(a.slug,a.status),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:O(a),alt:a.title,className:"w-full h-40 object-cover",onError:l=>{l.target.src="https://placehold.co/300x200.png"}}),j||!M?e.jsx(B,{className:"absolute bottom-2 left-2 bg-red-500 text-white rounded px-2 py-1 text-[11px]",children:"Out of Stock"}):e.jsxs(B,{className:"absolute bottom-2 left-2 bg-primary text-white rounded px-2 py-1 text-[11px]",children:["In Stock (",D,")"]}),e.jsx(B,{className:_("absolute bottom-2 right-2 rounded px-2 py-1 text-[11px] capitalize",we(a.status)),children:a.status})]}),e.jsxs(he,{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center gap-2",children:[e.jsxs("div",{className:"text-[16px] font-semibold mb-1",children:[ge(a.price),a.priceType&&e.jsxs("span",{className:"text-[12px] font-normal",children:["/"," ",a.priceType==="sqft"?"sq ft":a.priceType==="linear"?"linear ft":"pallet"]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(C,{title:"Edit",variant:"ghost",size:"icon",onClick:l=>n(l,a.id||a._id||""),className:"w-8 h-8 hover:bg-gray-200 text-gray-600 hover:text-gray-900 rounded-md",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx(C,{title:"Delete",variant:"ghost",size:"icon",onClick:l=>U(l,a.id||a._id||"",a.title),className:"w-8 h-8 hover:bg-red-50 text-red-600 hover:text-red-700 rounded-md",children:e.jsx(Pe,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-[12px] text-gray-500 line-clamp-1 capitalize",children:typeof a.category=="string"?a.category:a.category?.name}),e.jsxs("p",{className:"text-[14px] text-gray-700 leading-snug line-clamp-1 mb-1 capitalize",children:[a.title," ",a.dimensions?`- ${a.dimensions.length} L x ${a.dimensions.width} W x ${a.dimensions.height} H `:""," "]}),e.jsxs("div",{className:"flex justify-between text-[12px] text-gray-500",children:[e.jsx("span",{className:"capitalize",children:z(a)}),e.jsx("span",{className:"text-primary capitalize",children:A(a.createdAt)})]}),a.status!=="draft"&&e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-2 mt-2",children:[e.jsx(C,{onClick:w,leftIcon:ae,variant:"outline",className:"text-gray-600 h-10  !text-sm hover:text-gray-600 border-gray-500 hover:bg-gray-50",children:"Manage Stock"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{htmlFor:`status-${u}`,className:"text-xs text-gray-600",children:v?"Active":"Inactive"}),e.jsx(W,{id:`status-${u}`,checked:v,onCheckedChange:I,disabled:m,className:_("h-6 w-12  transition-all duration-200",m&&"opacity-70",v&&"data-[state=checked]:bg-green-500"),onClick:l=>l.stopPropagation()})]})]})]})]}),e.jsx(Te,{isOpen:y,onClose:()=>P(!1),product:a,onUpdateStock:F})]})},Ie=()=>e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"h-8 w-32"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-10 w-32 rounded-lg"}),e.jsx(o,{className:"h-10 w-24 rounded-lg"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:8}).map((a,b)=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx(o,{className:"w-full h-48"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx(o,{className:"h-5 w-full"}),e.jsx(o,{className:"h-4 w-3/4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(o,{className:"h-6 w-20"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(o,{className:"h-4 w-4 rounded"}),e.jsx(o,{className:"h-4 w-8"})]})]}),e.jsx(o,{className:"h-3 w-24"}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(o,{className:"h-8 flex-1 rounded"}),e.jsx(o,{className:"h-8 w-8 rounded"}),e.jsx(o,{className:"h-8 w-8 rounded"})]})]})]},b))}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(o,{className:"h-10 w-10 rounded"}),e.jsx(o,{className:"h-10 w-10 rounded"}),e.jsx(o,{className:"h-10 w-10 rounded"}),e.jsx(o,{className:"h-10 w-16 rounded"}),e.jsx(o,{className:"h-10 w-10 rounded"}),e.jsx(o,{className:"h-10 w-10 rounded"})]})]}),Je=()=>{const a=ue(),[b,n]=d.useState(1),[U,m]=d.useState({sorting:"ascending"}),[x,y]=d.useState("all"),[P,c]=d.useState([]),[N,u]=d.useState([]),[v,h]=d.useState({popularity:[{id:"best-selling",label:"Best-Selling Products",checked:!1},{id:"most-viewed",label:"Most Viewed",checked:!1},{id:"top-rated",label:"Top-Rated",checked:!1},{id:"most-reviewed",label:"Most Reviewed",checked:!1},{id:"featured",label:"Featured Products",checked:!1},{id:"trending",label:"Trending Now",checked:!1}],newest:[{id:"recently-updated",label:"Recently Updated",checked:!1},{id:"featured-new",label:"Featured New Products",checked:!1},{id:"sort-by-date",label:"Sort by Date Added",checked:!1},{id:"new-arrivals",label:"New Arrivals",checked:!1}],availability:[{id:"delivery",label:"Delivery",checked:!1},{id:"shipping",label:"Shipping",checked:!1},{id:"pickup",label:"Pickup",checked:!1}],readyTime:[{id:"next-day",label:"Ready Next Day",checked:!1},{id:"this-week",label:"Ready This Week",checked:!1}],sorting:"ascending",pricing:"",priceRange:[],categories:[],subcategories:[]}),[D,M]=d.useState({isOpen:!1,productId:"",productTitle:""}),j=10,{data:I,isLoading:F,isError:w,refetch:A}=Ne({page:b,limit:j,location:x==="all"?void 0:x,category:P.length>0?P.join(","):void 0,subCategory:N.length>0?N.join(","):void 0,...U}),z=ve(),O=s=>{h(s);const r={};s.categories&&s.categories.length>0?c(s.categories):c([]),s.subcategories&&s.subcategories.length>0?u(s.subcategories):u([]);const L=s.popularity.filter(p=>p.checked).map(p=>p.id);L.length>0&&(r.popularity=L);const E=s.newest.filter(p=>p.checked).map(p=>p.id);E.length>0&&(r.newest=E);const H=s.availability.filter(p=>p.checked).map(p=>p.id);H.length>0&&(r.availability=H);const K=s.readyTime.filter(p=>p.checked).map(p=>p.id);K.length>0&&(r.readyTime=K),s.sorting!=="ascending"&&(r.sorting=s.sorting),s.pricing!=="custom"&&s.pricing!==""?r.pricing=s.pricing:s.priceRange&&s.pricing!==""&&(r.pricing="custom",r.priceRange=s.priceRange.join(",")),m(r),n(1)},l=()=>{m({}),n(1),c([]),u([]),h({popularity:[{id:"best-selling",label:"Best-Selling Products",checked:!1},{id:"most-viewed",label:"Most Viewed",checked:!1},{id:"top-rated",label:"Top-Rated",checked:!1},{id:"most-reviewed",label:"Most Reviewed",checked:!1},{id:"featured",label:"Featured Products",checked:!1},{id:"trending",label:"Trending Now",checked:!1}],newest:[{id:"recently-updated",label:"Recently Updated",checked:!1},{id:"featured-new",label:"Featured New Products",checked:!1},{id:"sort-by-date",label:"Sort by Date Added",checked:!1},{id:"new-arrivals",label:"New Arrivals",checked:!1}],availability:[{id:"delivery",label:"Delivery",checked:!1},{id:"shipping",label:"Shipping",checked:!1},{id:"pickup",label:"Pickup",checked:!1}],readyTime:[{id:"next-day",label:"Ready Next Day",checked:!1},{id:"this-week",label:"Ready This Week",checked:!1}],sorting:"ascending",pricing:"",priceRange:[],categories:[],subcategories:[]})},g=(s,r)=>{if(r==="draft"){fe("Draft products are not available for preview",{icon:"⚠️",style:{background:"#FEF8C6",color:"#000",border:"1px solid #FCE992"}});return}else a(`/seller/products/${s}`)},f=(s,r)=>{s.stopPropagation(),a(`/seller/products/${r}/edit`)},k=(s,r,L)=>{s.stopPropagation(),M({isOpen:!0,productId:r,productTitle:L})},$=async()=>{try{await z.mutateAsync(D.productId),M({isOpen:!1,productId:"",productTitle:""}),A()}catch(s){console.error("Failed to delete product:",s)}},V=()=>{M({isOpen:!1,productId:"",productTitle:""})};if(F)return e.jsx(Ie,{});if(w)return e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Listing"}),e.jsx(q,{onApply:O,onClear:l,initialFilters:v})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(le,{className:"h-12 w-12 text-red-500"}),e.jsx("p",{className:"text-gray-600",children:"Failed to load products"}),e.jsx("button",{onClick:()=>A(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90",children:"Try Again"})]})]});const T=I?.data,S=Array.isArray(T)?T:T?.products||[],t=Array.isArray(T)?[]:T?.availableLocations||[],i=I?.pagination?.totalPages||1;return S.length===0?e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Listing"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Z,{children:[e.jsx(G,{asChild:!0,children:e.jsxs("button",{className:"bg-blue-50 flex gap-2 h-[42px] items-center px-2 md:px-3 py-2 rounded-lg hover:bg-blue-100 transition-colors outline-none cursor-pointer",children:[e.jsx(X,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-xs text-gray-600 hidden md:block",children:"Location"}),e.jsxs("span",{className:"text-xs md:text-sm font-semibold text-gray-900 flex items-center gap-1",children:[x==="all"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden lg:inline",children:"All Locations"}),e.jsx("span",{className:"lg:hidden",children:"All"})]}):e.jsx(e.Fragment,{children:t.find(s=>s._id===x)?.displayName||t.find(s=>s._id===x)?.city||"Select Location"}),e.jsx(J,{size:12})]})]})]})}),e.jsxs(ee,{align:"start",className:"w-56",children:[e.jsx(se,{}),e.jsx(R,{className:"cursor-pointer",onClick:()=>y("all"),children:"All Locations"}),t.map(s=>e.jsx(R,{className:"cursor-pointer",onClick:()=>y(s._id),children:s.displayName||`${s.city}, ${s.state}`},s._id))]})]}),e.jsx(q,{onApply:O,onClear:l,initialFilters:v})]})]}),e.jsx("div",{className:"flex flex-col items-center justify-center space-y-4",children:e.jsx(Ae,{title:"No products found",description:"Check back later for new products",icon:e.jsx("img",{src:Me,alt:"Product empty",className:"h-64 w-auto"})})})]}):e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Listing"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Z,{children:[e.jsx(G,{asChild:!0,children:e.jsxs("button",{className:"bg-blue-50 flex gap-2 h-[42px] items-center px-2 md:px-3 py-2 rounded-lg hover:bg-blue-100 transition-colors outline-none cursor-pointer",children:[e.jsx(X,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-xs text-gray-600 hidden md:block",children:"Location"}),e.jsxs("span",{className:"text-xs md:text-sm font-semibold text-gray-900 flex items-center gap-1",children:[x==="all"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden lg:inline",children:"All Locations"}),e.jsx("span",{className:"lg:hidden",children:"All"})]}):e.jsx(e.Fragment,{children:t.find(s=>s._id===x)?.displayName||t.find(s=>s._id===x)?.city||"Select Location"}),e.jsx(J,{size:12})]})]})]})}),e.jsxs(ee,{align:"start",className:"w-56",children:[e.jsx(se,{}),e.jsx(R,{className:"cursor-pointer",onClick:()=>y("all"),children:"All Locations"}),t.map(s=>e.jsx(R,{className:"cursor-pointer",onClick:()=>y(s._id),children:s.displayName||`${s.city}, ${s.state}`},s._id))]})]}),e.jsx(q,{onApply:O,onClear:l,initialFilters:v})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:S.map(s=>e.jsx(Le,{product:s,onProductClick:g,onEditProduct:f,onDeleteProduct:k},s.id||s._id))}),i>1&&e.jsx(ye,{currentPage:b,totalPages:i,onPageChange:n}),e.jsx(ie,{isOpen:D.isOpen,onClose:V,onConfirm:$,title:"Delete Product",description:e.jsxs(e.Fragment,{children:["Are you sure you want to delete"," ",e.jsxs("strong",{className:"font-semibold",children:['"',D.productTitle,'"']}),"? This action cannot be undone."]}),confirmText:"Delete",cancelText:"Cancel",isLoading:z.isPending})]})};export{Je as default};
