import{c as W,r as a,j as t}from"./index-BiCr9dd_.js";import{t as z,a as O,O as G}from"./orderTransformers-s_9Wl12O.js";import{P as J}from"./pagination-wrapper-C-UNib8j.js";import{a as K}from"./useOrderMutations-CLFnksb7.js";import{S as U}from"./SellerOrdersPageSkeleton-Bs-KLJkr.js";import{S as P}from"./SortDropdown-DvNYBc23.js";import"./badge-gylWw4eT.js";import"./orderUtils-DR-jD4b-.js";import"./date-utils-CIparGJB.js";import"./en-US-CPLesiGp.js";import"./isSameDay-CeY-boyx.js";import"./format-Byp0gi1d.js";import"./endOfMonth-B0jjArdg.js";const ct=()=>{const M=W(),[d,g]=a.useState(1),[x]=a.useState(10),[l,k]=a.useState("recent"),[p,v]=a.useState(),[o,C]=a.useState({orderStatus:"",pricing:""}),u=a.useCallback((e,r,s)=>{const w=new Date;let n,b,h="-createdAt";if(r)switch(r){case"high-to-low":h="-amount";break;case"low-to-high":h="amount";break}else switch(e){case"custom":if(s){const A=s.from.getFullYear(),V=String(s.from.getMonth()+1).padStart(2,"0"),q=String(s.from.getDate()).padStart(2,"0");n=`${A}-${V}-${q}`;const B=s.to.getFullYear(),L=String(s.to.getMonth()+1).padStart(2,"0"),Q=String(s.to.getDate()).padStart(2,"0");b=`${B}-${L}-${Q}`}break;case"this-week":const i=new Date;i.setDate(i.getDate()-i.getDay()),i.setHours(0,0,0,0),n=i.toISOString().split("T")[0];break;case"this-month":const N=new Date(w.getFullYear(),w.getMonth(),1);N.setHours(0,0,0,0),n=N.toISOString().split("T")[0];break;case"last-3-months":const c=new Date;c.setMonth(c.getMonth()-3),c.setHours(0,0,0,0),n=c.toISOString().split("T")[0];break;case"last-6-months":const m=new Date;m.setMonth(m.getMonth()-6),m.setHours(0,0,0,0),n=m.toISOString().split("T")[0];break}return{startDate:n,endDate:b,sort:h}},[]),F=a.useMemo(()=>{const{startDate:e,endDate:r,sort:s}=u(l,o.pricing,p);return{page:d,limit:x,...e&&{startDate:e},...r&&{endDate:r},...s&&{sort:s},...o.orderStatus&&{status:o.orderStatus}}},[d,x,l,o,p,u]),{data:f,isLoading:$,isError:Y,error:T}=K(F),E=e=>{M(`/buying/${e}`)},H=e=>{g(e)},S=(e,r)=>{k(e),v(r),g(1)},j=e=>{C(e),g(1)};if($)return t.jsx(U,{});if(Y)return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[t.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"Error loading orders"}),t.jsx("p",{className:"text-gray-600 text-sm",children:T?.response?.data?.message||"Failed to fetch orders. Please try again."})]});const I=f?.data||[],y=z(I),D=f?.pagination?.totalPages||1;return y.length?t.jsxs("div",{className:"py-4 md:p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Orders"}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[t.jsx(P,{selectedSort:l,onSortChange:S}),t.jsx(O,{filters:o,onFilterChange:j})]})]}),t.jsx(G,{orders:y,onViewDetails:E,showSort:!1,showFilter:!1}),D>1&&t.jsx(J,{currentPage:d,totalPages:D,onPageChange:H})]}):t.jsxs("div",{className:"py-4 md:p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Orders"}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[t.jsx(P,{selectedSort:l,onSortChange:S}),t.jsx(O,{filters:o,onFilterChange:j})]})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[t.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"No orders found"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"You don't have any orders yet."})]})]})};export{ct as default};
