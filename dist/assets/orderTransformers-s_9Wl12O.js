import{r as N,j as e,aj as B,ak as H,B as d,aH as I,am as _,aZ as U,R as q,i as f,u as E,C as v,b as G,Y as b,Z as S,$ as w,a_ as C,az as Y}from"./index-BiCr9dd_.js";import{S as Z,T as J,a as K,b as k,c as i,d as Q,e as m}from"./SortDropdown-DvNYBc23.js";import{B as A}from"./badge-gylWw4eT.js";import{g as D}from"./orderUtils-DR-jD4b-.js";import{f as R}from"./date-utils-CIparGJB.js";const V=({filters:s={orderStatus:"",pricing:""},onFilterChange:l,className:h=""})=>{const[n,o]=N.useState(s),g=a=>{o(c=>({...c,orderStatus:a}))},y=a=>{o(c=>({...c,pricing:a}))},p=()=>{const a={orderStatus:"",pricing:""};o(a),l?.(a)},u=()=>{l?.(n)};return e.jsxs(B,{children:[e.jsx(H,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"icon",className:`w-8 h-8 bg-primary/10 hover:bg-primary/20 ${h}`,children:e.jsx(I,{className:"w-4 h-4 text-primary"})})}),e.jsxs(_,{align:"end",className:"w-full md:w-[600px] p-4",children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:" Order Status"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:["Pending","Delivered","Processing","Cancelled","In Transit","Out for Delivery"].map(a=>e.jsxs("label",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-sm border border-gray-200 cursor-pointer transition-colors",onClick:c=>{c.preventDefault(),g(a)},children:[e.jsx(U,{checked:n.orderStatus===a,onCheckedChange:()=>{},className:"pointer-events-none h-4 w-4"}),e.jsx("span",{className:"text-sm select-none capitalize",children:a})]},a))})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:"Pricing"}),e.jsx(q,{value:n.pricing,onValueChange:y,children:e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("label",{className:`flex items-center space-x-2 cursor-pointer ${n.pricing==="high-to-low"?"text-primary":"text-gray-600"}`,children:[e.jsx(f,{value:"high-to-low",id:"high-to-low"}),e.jsx("span",{className:"text-sm",children:"High to Low"})]}),e.jsxs("label",{className:`flex items-center space-x-2 cursor-pointer ${n.pricing==="low-to-high"?"text-primary":"text-gray-600"}`,children:[e.jsx(f,{value:"low-to-high",id:"low-to-high"}),e.jsx("span",{className:"text-sm",children:"Low to High"})]})]})})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(d,{variant:"outline",onClick:p,className:"  w-[126px] h-[48px] !text-sm text-primary border border-gray-200-primary hover:bg-primary/10 hover:text-primary",children:"Clear All Filters"}),e.jsx(d,{onClick:u,className:"w-[126px] h-[48px] !text-sm  bg-primary hover:bg-primary/90 text-white",children:"Apply Filter"})]})]})]})},le=({orders:s,onViewAll:l,onViewDetails:h,title:n,showFilter:o=!0,showSort:g=!0,totalOrders:y,selectedSort:p,onSortChange:u,filters:a,onFilterChange:c})=>{const{user:r}=E(),[F,T]=N.useState("this-week"),[P,O]=N.useState({orderStatus:"",pricing:""}),$=p!==void 0?p:F,L=a!==void 0?a:P,M=t=>{u?u(t):T(t)},z=t=>{c?c(t):O(t)};return y===0?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"You don't have any orders yet."})]}):e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:n})}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[l&&e.jsx(d,{variant:"link",className:"text-primary font-semibold text-xs md:text-sm p-0 underline",onClick:l,children:"View All Orders"}),g&&e.jsx(Z,{selectedSort:$,onSortChange:M}),o&&e.jsx(V,{filters:L,onFilterChange:z})]})]}),e.jsx("div",{className:"block md:hidden space-y-3",children:s.map((t,j)=>e.jsx(v,{className:"bg-white shadow-sm border-gray-200",children:e.jsxs(G,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Order ID"}),e.jsxs("p",{className:"text-sm font-medium text-primary",children:["#",t.id]})]}),e.jsx(A,{className:`px-2 py-1 rounded-full font-medium text-xs ${D(t.status)}`,children:t.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Product"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:t.products?.map(x=>x.title).join(", ")})]}),r?.role==="seller"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(b,{className:"w-8 h-8 border border-white shadow-sm",children:[t.customer?.avatar?e.jsx(S,{src:t.customer.avatar,alt:t.customer?.displayName||"Customer",className:"object-cover"}):null,e.jsx(w,{className:"bg-gray-200 text-gray-700 text-xs font-medium",children:t.customer?.displayName?t.customer.displayName.split(" ").map(x=>x[0]).join(""):"NA"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:t.customer?.displayName||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.customer?.email||"No email"})]})]}),r?.role==="driver"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Pick Up Location"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:t.orderSummary?.formattedPickupAddress})]}),r?.role==="driver"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Drop Location"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:t.orderSummary?.formattedShippingAddress})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:R(t.date)}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:C(t.amount)})]}),e.jsxs(d,{variant:"ghost",size:"sm",className:"text-primary font-semibold text-xs",onClick:()=>h?.(t.id),children:["Details",e.jsx(Y,{className:"w-4 h-4 ml-1"})]})]})]})]})},`${t.id}-${j}`))}),e.jsx(v,{className:"hidden md:block bg-white shadow-sm border-gray-50 rounded-3xl p-0 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(J,{children:[e.jsx(K,{children:e.jsxs(k,{className:"bg-gray-50/50 hover:bg-gray-50/50",children:[e.jsx(i,{className:"text-center font-semibold text-gray-700 text-xs lg:text-sm",children:"Order ID"}),e.jsx(i,{className:"text-left font-semibold text-gray-700 text-xs lg:text-sm",children:"Product"}),r?.role==="seller"&&e.jsx(i,{className:"text-left font-semibold text-gray-700 text-xs lg:text-sm",children:"Customer Details"}),r?.role==="driver"&&e.jsx(i,{className:"text-left font-semibold text-gray-700 text-xs lg:text-sm",children:"Pick Up Location"}),r?.role==="driver"&&e.jsx(i,{className:"text-left font-semibold text-gray-700 text-xs lg:text-sm",children:"Drop Location"}),e.jsx(i,{className:"text-center font-semibold text-gray-700 text-xs lg:text-sm hidden lg:table-cell",children:"Order Date"}),e.jsx(i,{className:"text-center font-semibold text-gray-700 text-xs lg:text-sm",children:"Amount"}),e.jsx(i,{className:"text-center font-semibold text-gray-700 text-xs lg:text-sm",children:"Status"}),e.jsx(i,{className:"text-center font-semibold text-gray-700 text-xs lg:text-sm",children:"Actions"})]})}),e.jsx(Q,{children:s.map((t,j)=>e.jsxs(k,{className:"hover:bg-gray-50/30 border-b",children:[e.jsx(m,{className:"text-center",children:e.jsxs("span",{className:"text-primary font-medium text-xs lg:text-sm",children:["#",t.id]})}),e.jsx(m,{className:"text-left   max-w-[200px] truncate",children:e.jsx("span",{className:"text-gray-900 text-xs lg:text-sm",children:t.products?.map(x=>x.title).join(", ")})}),r?.role==="seller"&&e.jsx(m,{className:"py-3 lg:py-4",children:e.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[e.jsxs(b,{className:"w-8 h-8 lg:w-10 lg:h-10 border-2 border-white shadow-sm",children:[t.customer?.avatar?e.jsx(S,{src:t.customer.avatar,alt:t.customer?.displayName||"Customer",className:"object-cover"}):null,e.jsx(w,{className:"bg-gray-200 text-gray-700 font-medium text-xs uppercase",children:t.customer?.displayName?t.customer.displayName.split(" ").map(x=>x[0]).join(""):"NA"})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-xs lg:text-sm text-gray-900 capitalize",children:t.customer?.displayName||"Unknown"}),e.jsx("div",{className:"text-xs text-gray-500 hidden xl:block",children:t.customer?.email||"No email"})]})]})}),r?.role==="driver"&&e.jsx(m,{className:"text-left max-w-[200px] truncate",children:e.jsx("span",{className:"text-gray-700 text-xs lg:text-sm ",children:t.orderSummary?.formattedPickupAddress||"-"})}),r?.role==="driver"&&e.jsx(m,{className:"text-left max-w-[200px] truncate",children:e.jsx("span",{className:"text-gray-700 text-xs lg:text-sm ",children:t.orderSummary?.formattedShippingAddress||"-"})}),e.jsx(m,{className:"text-center hidden lg:table-cell",children:e.jsx("span",{className:"text-gray-700 text-xs lg:text-sm",children:R(t.date)})}),e.jsx(m,{className:"text-center font-semibold",children:e.jsx("span",{className:"text-gray-900 text-xs lg:text-sm",children:C(t.amount)})}),e.jsx(m,{className:"text-center",children:e.jsx(A,{className:`px-2 lg:px-3 py-1 rounded-full font-medium text-xs ${D(t.status)}`,children:t.status})}),e.jsx(m,{className:"text-center",children:e.jsx(d,{variant:"link",className:"text-primary font-semibold text-xs lg:text-sm p-0 underline",onClick:()=>h?.(t.id),children:"See Details"})})]},`${t.id}-${j}`))})]})})})]})};function W(s){return{id:s.orderNumber||s._id,customer:{id:s.customer?.userRef?._id||"",displayName:s.customer?.userRef?.displayName||"Customer",email:s.customer?.userRef?.email||"",avatar:s.customer?.userRef?.avatar||""},driver:s.driver?{id:s.driver?.userRef?._id||"",displayName:s.driver?.userRef?.displayName||"Driver",email:s.driver?.userRef?.email||"",avatar:s.driver?.userRef?.avatar||""}:void 0,seller:{id:s.seller?.userRef?._id||"",displayName:s.seller?.userRef?.displayName||"Seller",email:s.seller?.userRef?.email||"",avatar:s.seller?.userRef?.avatar||""},products:s.products.map(l=>({id:l.id,title:l.title,quantity:l.quantity,price:l.price,deliveryDate:l.deliveryDate,image:l.image})),date:s.createdAt,amount:s.amount,status:s.status,orderSummary:s.orderSummary?{formattedPickupAddress:s.orderSummary.formattedPickupAddress,formattedShippingAddress:s.orderSummary.formattedShippingAddress,pickupAddress:s.orderSummary.pickupAddress,shippingAddress:s.orderSummary.shippingAddress,proofOfDelivery:s.orderSummary.proofOfDelivery||"",deliveryMessage:s.orderSummary.deliveryMessage,paymentMethod:{type:s.orderSummary.paymentMethod.type,cardType:s.orderSummary.paymentMethod.cardType||"",cardNumber:s.orderSummary.paymentMethod.cardNumber||""},subTotal:s.orderSummary.subTotal,shippingFee:s.orderSummary.shippingFee,marketplaceFee:s.orderSummary.marketplaceFee,taxes:s.orderSummary.taxes,total:s.orderSummary.total}:void 0}}function re(s){return s.map(W)}export{le as O,V as a,re as t};
