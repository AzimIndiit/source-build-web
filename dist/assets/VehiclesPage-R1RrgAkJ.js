import{j as e,K as M,X as D,N as E,B as N,bc as S,S as s,u as I,r as m,f as z}from"./index-CUSVstqU.js";import{P as A}from"./pagination-wrapper-Caj-HnEp.js";import{T as O}from"./trash-2-BLdsFbCa.js";import{c as L,d as T}from"./useVehicleMutations-BPmVrHVS.js";import{E as k}from"./EmptyState-CH6fPGhV.js";import{C as _}from"./circle-alert-CpzCXbnG.js";import"./vehicleService-DvBLmtkJ.js";const F=({vehicle:a,onEdiVehicle:i,onDeleteVehicle:r})=>{const c=t=>t.vehicleImages&&t.vehicleImages.length>0?t.vehicleImages[0]:"https://placehold.co/300x200.png";return e.jsx(e.Fragment,{children:e.jsxs(M,{className:D("overflow-hidden border border-gray-200 rounded-xl hover:shadow-md transition-shadow p-0 cursor-pointer group gap-0",a.status==="inactive"&&"grayscale"),children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:c(a),alt:a.displayName,className:"w-full h-40 object-cover",onError:t=>{t.target.src="https://placehold.co/300x200.png"}})}),e.jsxs(E,{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[16px] text-gray-900 leading-snug line-clamp-1 mb-1 capitalize",children:a.displayName}),e.jsxs("p",{className:"text-[14px] text-gray-500 leading-snug line-clamp-1 mb-1 capitalize",children:["Reg.No.- ",a.vehicleRegistrationNumber]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(N,{title:"Edit",variant:"ghost",size:"icon",onClick:t=>i(t,a.id||a._id||""),className:"w-8 h-8 hover:bg-gray-200 text-gray-600 hover:text-gray-900 rounded-md",children:e.jsx(S,{})}),e.jsx(N,{title:"Delete",variant:"ghost",size:"icon",onClick:t=>r(t,a.id||a._id||"",a.displayName),className:"w-8 h-8 hover:bg-red-50 text-red-600 hover:text-red-700 rounded-md",children:e.jsx(O,{})})]})]}),e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[14px] text-gray-500 leading-snug line-clamp-1 mb-1 capitalize",children:"Vehicle Modal"}),e.jsx("p",{className:"text-[14px] text-gray-900 leading-snug line-clamp-1 mb-1 capitalize",children:a.vehicleModel})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[14px] text-gray-500 leading-snug line-clamp-1 mb-1 capitalize",children:"Vehicle Manufacturer"}),e.jsx("p",{className:"text-[14px] text-gray-900 leading-snug line-clamp-1 mb-1 capitalize",children:a.vehicleManufacturer})]})]})]})]})})},R=()=>e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(s,{className:"h-8 w-32"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{className:"h-10 w-32 rounded-lg"}),e.jsx(s,{className:"h-10 w-24 rounded-lg"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:8}).map((a,i)=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx(s,{className:"w-full h-48"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx(s,{className:"h-5 w-full"}),e.jsx(s,{className:"h-4 w-3/4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(s,{className:"h-6 w-20"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(s,{className:"h-4 w-4 rounded"}),e.jsx(s,{className:"h-4 w-8"})]})]}),e.jsx(s,{className:"h-3 w-24"}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(s,{className:"h-8 flex-1 rounded"}),e.jsx(s,{className:"h-8 w-8 rounded"}),e.jsx(s,{className:"h-8 w-8 rounded"})]})]})]},i))}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(s,{className:"h-10 w-10 rounded"}),e.jsx(s,{className:"h-10 w-10 rounded"}),e.jsx(s,{className:"h-10 w-10 rounded"}),e.jsx(s,{className:"h-10 w-16 rounded"}),e.jsx(s,{className:"h-10 w-10 rounded"}),e.jsx(s,{className:"h-10 w-10 rounded"})]})]}),B="/assets/vehicleEmptyState-hO_VGZ4f.svg",Z=()=>{const a=I(),[i,r]=m.useState(1),[c,t]=m.useState("all"),[n,d]=m.useState({isOpen:!1,vehicleId:"",displayName:""}),y=10,{data:x,isLoading:f,isError:v,refetch:h}=L({page:i,limit:y,location:c==="all"?void 0:c}),p=T(),w=(l,o)=>{l.stopPropagation(),a(`/driver/vehicles/${o}/edit`)},b=(l,o,P)=>{l.stopPropagation(),d({isOpen:!0,vehicleId:o,displayName:P})},V=async()=>{try{await p.mutateAsync(n.vehicleId),d({isOpen:!1,vehicleId:"",displayName:""}),h()}catch(l){console.error("Failed to delete vehicle:",l)}},C=()=>{d({isOpen:!1,vehicleId:"",displayName:""})};if(f)return e.jsx(R,{});if(v)return e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Listing"})}),e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(_,{className:"h-12 w-12 text-red-500"}),e.jsx("p",{className:"text-gray-600",children:"Failed to load vehicles"}),e.jsx("button",{onClick:()=>h(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90",children:"Try Again"})]})]});const g=x?.data,j=Array.isArray(g)?g:[],u=x?.meta?.pagination?.pages||1;return j.length===0?e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Listing"})}),e.jsx(k,{title:"No vehicles found",description:"Add a vehicle to get started with your deliveries",icon:e.jsx("img",{src:B,className:"w-64 h-56"}),className:"h-64"})]}):e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Vehicle Management"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:j.map(l=>e.jsx(F,{vehicle:l,onEdiVehicle:w,onDeleteVehicle:b},l.id||l._id))}),u>1&&e.jsx(A,{currentPage:i,totalPages:u,onPageChange:r}),e.jsx(z,{isOpen:n.isOpen,onClose:C,onConfirm:V,title:"Delete Vehicle",description:e.jsxs(e.Fragment,{children:["Are you sure you want to delete"," ",e.jsxs("strong",{className:"font-semibold",children:['"',n.displayName,'"']}),"? This action cannot be undone."]}),confirmText:"Delete",cancelText:"Cancel",isLoading:p.isPending})]})};export{Z as default};
