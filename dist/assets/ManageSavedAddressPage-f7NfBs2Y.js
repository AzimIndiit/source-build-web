import{j as e,K as i,N as f,bb as P,B as g,bc as I,S as t,r as h,aj as O,ak as T,bd as _,be as z,bf as F,aO as q,an as B,f as L}from"./index-CUSVstqU.js";import{T as K}from"./trash-2-BLdsFbCa.js";import{E as Q}from"./EmptyState-CH6fPGhV.js";const R=({name:o,phoneNumber:d,formattedAddress:a,isDefault:n,onEdit:c,onDelete:r})=>e.jsx(i,{className:"relative bg-gray-50 border border-gray-200 rounded-lg hover:shadow-md transition-shadow h-[180px] flex flex-col",children:e.jsxs(f,{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"flex items-start gap-2",children:e.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-1",children:o})}),n&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 text-xs font-medium text-primary bg-blue-100 rounded",children:"Default"})]}),e.jsxs("div",{className:"flex-1 space-y-1 overflow-hidden",children:[e.jsx("p",{className:"text-sm text-gray-600",children:P(d)}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:a})]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-auto pt-3",children:[e.jsx(g,{title:"Edit",variant:"ghost",size:"icon",onClick:c,className:"w-8 h-8 hover:bg-gray-200 text-gray-600 hover:text-gray-900 rounded-md",children:e.jsx(I,{className:"w-4 h-4"})}),e.jsx(g,{title:"Delete",variant:"ghost",size:"icon",onClick:r,className:"w-8 h-8 hover:bg-red-50 text-red-600 hover:text-red-700 rounded-md",children:e.jsx(K,{className:"w-4 h-4"})})]})]})}),U=()=>e.jsx(i,{className:"bg-white border-gray-200 shadow-none h-[calc(100vh-200px)] flex flex-col",children:e.jsxs(f,{className:"px-4 sm:px-6 flex flex-col flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsx(t,{className:"h-8 w-40"}),e.jsx(t,{className:"w-full sm:w-[180px] h-10 sm:h-11 rounded-lg"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[...Array(3)].map((o,d)=>e.jsxs(i,{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx(t,{className:"h-6 w-16 rounded-full"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{className:"h-8 w-8 rounded"}),e.jsx(t,{className:"h-8 w-8 rounded"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(t,{className:"h-3 w-12 mb-1"}),e.jsx(t,{className:"h-5 w-28"})]}),e.jsxs("div",{children:[e.jsx(t,{className:"h-3 w-16 mb-1"}),e.jsx(t,{className:"h-5 w-32"})]}),e.jsxs("div",{children:[e.jsx(t,{className:"h-3 w-20 mb-1"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"h-4 w-full"}),e.jsx(t,{className:"h-4 w-3/4"})]})]}),e.jsx(t,{className:"h-9 w-full rounded-lg mt-3"})]})]},d))})]})}),V="/assets/addressEmptyState-Dqg5hNVk.svg",J=()=>{const[o,d]=h.useState(!1),[a,n]=h.useState(null),[c,r]=h.useState(!1),[m,x]=h.useState(null),{data:u,isLoading:y,error:v}=O(),j=T(),N=_(),b=z(),w=F(),p=Array.isArray(u?.data)?u.data:u?.data?[u.data]:[],A=async s=>{try{if(a){const l=a.id||a._id;l&&(await N.mutateAsync({id:l,data:s}),n(null))}else await j.mutateAsync(s);d(!1)}catch(l){console.error("Failed to save address:",l)}},S=s=>{n(s),d(!0)},D=s=>{x(s),r(!0)},M=()=>{if(m){const s=m.id||m._id;s&&b.mutate(s,{onSuccess:()=>{r(!1),x(null)},onError:l=>{console.error("Failed to delete address:",l),r(!1),x(null)}})}},C=()=>{r(!1),x(null)},E=()=>{d(!1),n(null)},k=s=>{const l=s.id||s._id;l&&w.mutate(l)};return y?e.jsx(U,{}):v?e.jsx(i,{className:"bg-white border-gray-200 shadow-none h-[calc(100vh-200px)] justify-center items-center",children:e.jsx(f,{className:"px-4 sm:px-6",children:e.jsx("div",{className:"text-center py-12 text-red-500",children:"Failed to load addresses. Please try again."})})}):e.jsx(i,{className:"bg-white border-gray-200 shadow-none min-h-[calc(100vh-200px)] flex flex-col ",children:e.jsxs(f,{className:"px-4 sm:px-6 flex flex-col flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold",children:"Saved Address"}),e.jsxs(g,{onClick:()=>d(!0),className:"w-full sm:w-auto min-w-full sm:min-w-[180px] h-10 sm:h-11 bg-primary hover:bg-primary/90 text-white px-3 sm:px-5 rounded-lg flex items-center justify-center gap-2 text-sm sm:text-base font-medium",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Add New Address"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6 mb-4 ",children:p.length>0?p.map(s=>{const l=s.id||s._id||"";return e.jsx(R,{name:s.name,phoneNumber:s.phoneNumber,formattedAddress:s.formattedAddress||"",isDefault:s.isDefault,onEdit:()=>S(s),onDelete:()=>D(s),onSetDefault:s.isDefault?void 0:()=>k(s)},l)}):e.jsx("div",{className:"col-span-full",children:e.jsx(Q,{title:"No addresses added yet",description:"Add your addresses for quick access during checkout",icon:e.jsx("img",{src:V,className:"w-64 h-56"}),className:"min-h-[400px]"})})}),e.jsx(B,{isOpen:o,onClose:E,onSubmit:A,isSubmitting:j.isPending||N.isPending,totalAddress:p.length>1,initialData:a?{name:a.name,phoneNumber:a.phoneNumber,city:a.city,state:a.state,country:a.country,zipCode:a.zipCode,latitude:a.latitude,longitude:a.longitude,location:a.location,formattedAddress:a.formattedAddress,isDefault:a.isDefault,type:a.type}:void 0,isEdit:!!a}),c&&e.jsx(L,{isOpen:c,onClose:C,onConfirm:M,title:"Delete Address?",description:e.jsxs(e.Fragment,{children:["Are you sure you want to delete the address for"," ",e.jsx("strong",{className:"font-semibold",children:m?.name}),"? This action cannot be undone."]}),confirmText:"Yes, I'm Sure",cancelText:"Cancel",isLoading:b.isPending})]})})};export{J as default};
