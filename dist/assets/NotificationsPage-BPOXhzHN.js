import{V as y,b8 as N,bS as j,j as e,X as u,S as i,u as C,bT as v,bU as R,bV as k,bW as w,r as E,B as b,H as D}from"./index-CUSVstqU.js";import{f as _}from"./date-utils-CIparGJB.js";import{C as O}from"./circle-check-lkYoauXH.js";import{E as A}from"./EmptyState-CH6fPGhV.js";/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],P=y("circle-x",M);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],I=y("clipboard-check",U);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],L=y("megaphone",T);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]],S=y("package-x",V),$="/assets/notificationEmptyState-Dd74Ie5k.svg",F=s=>{switch(s){case"NEW_ORDER":return{iconColor:"text-green-600",bgColor:"bg-green-50"};case"ORDER_CANCELLED":return{iconColor:"text-red-600",bgColor:"bg-red-50"};case"ORDER_CONFIRMED":return{iconColor:"text-blue-600",bgColor:"bg-blue-50"};case"ORDER_DELIVERED":return{iconColor:"text-yellow-600",bgColor:"bg-yellow-50"};case"PRODUCT_OUT_OF_STOCK":return{iconColor:"text-red-600",bgColor:"bg-red-50"};case"PRODUCT_APPROVED":return{iconColor:"text-blue-600",bgColor:"bg-blue-50"};case"PRODUCT_PRICE_UPDATE":return{iconColor:"text-green-600",bgColor:"bg-green-50"};default:return{iconColor:"text-gray-600",bgColor:"bg-gray-50"}}},q=s=>{switch(s){case"NEW_ORDER":return I;case"ORDER_CANCELLED":return P;case"ORDER_CONFIRMED":return L;case"ORDER_DELIVERED":return N;case"PRODUCT_OUT_OF_STOCK":return S;case"PRODUCT_APPROVED":return O;case"PRODUCT_PRICE_UPDATE":return j;default:return N}},z=({notification:s,onClick:a,className:g})=>{const o=()=>{a?.(s._id)},p=c=>{const l=new Date(c),t=Math.floor((new Date().getTime()-l.getTime())/(1e3*60));if(t<1)return"Just Now";if(t<60)return`${t} ${t===1?"min":"mins"} ago`;if(t<1440){const h=Math.floor(t/60);return`${h} ${h===1?"hr":"hrs"} ago`}else return t<2880?"Yesterday":_(c)},m=F(s.type),x=q(s.type);return e.jsx("div",{onClick:o,className:u("p-3 bg-white rounded-sm shadow-sm border border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer",!s.isRead&&"bg-blue-50/30",g),children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:u("flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",m.bgColor),children:e.jsx(x,{className:u("w-5 h-5",m.iconColor)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:u("text-base font-semibold text-gray-900 mb-1",!s.isRead&&"font-bold"),children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:s.message})]}),e.jsx("div",{className:"flex-shrink-0 text-xs text-gray-500",children:p(s.createdAt||"")}),!s.isRead&&e.jsxs("div",{className:"flex items-center gap-1 ",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),e.jsx("span",{className:"text-xs text-primary font-medium",children:"New"})]})]})})]})})},H=()=>e.jsxs("div",{className:"py-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"h-8 w-32"}),e.jsx(i,{className:"h-6 w-28"})]}),e.jsx("div",{className:"divide-y divide-gray-100 space-y-2",children:Array.from({length:8}).map((s,a)=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 hover:bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(i,{className:"w-10 h-10 rounded-full"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(i,{className:"h-4 w-3/4"}),e.jsx(i,{className:"h-3 w-16"})]}),e.jsx(i,{className:"h-3 w-full"}),e.jsx(i,{className:"h-3 w-2/3"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(i,{className:"w-3 h-3 rounded-full"})})]},a))}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-center",children:e.jsx(i,{className:"h-10 w-28 rounded"})})]}),Q=()=>{const s=C(),{data:a,isLoading:g,error:o,fetchNextPage:p,hasNextPage:m,isFetchingNextPage:x}=v(),c=R(),l=k(),{data:f}=w(),t=async()=>{await l.mutateAsync()},h=E.useCallback(async d=>{const r=a?.pages.flatMap(n=>n.data).find(n=>n._id===d||n.id===d);if(r&&!r.isRead&&await c.mutateAsync(d),r?.actionUrl)try{const n=new URL(r.actionUrl);s(n.pathname)}catch{s(r.actionUrl)}},[a,c,s]);return g?e.jsx(H,{}):e.jsxs("div",{className:"py-4 md:p-6 space-y-6",children:[e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Notifications"}),e.jsx("button",{onClick:t,disabled:f?.data?.count===0||l.isPending,className:"cursor-pointer text-primary hover:text-primary/80 font-medium text-sm transition-colors disabled:opacity-50",children:l.isPending?"Marking...":"Mark All as Read"})]})}),o&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load notifications"}),e.jsx(b,{onClick:()=>window.location.reload(),variant:"outline",children:"Retry"})]}),!o&&a?.pages[0]?.data?.length===0&&e.jsx(A,{title:"No notifications yet",description:"You'll see your notifications here when you receive them",icon:e.jsx("img",{src:$,alt:"Notification empty",className:"h-64 w-auto"}),className:"py-12"}),!o&&a&&e.jsx("div",{className:"divide-y divide-gray-100 space-y-2",children:a.pages.flatMap(d=>d.data.map(r=>e.jsx(z,{notification:r,onClick:h},r._id||r.id)))}),m&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-center",children:e.jsx(b,{variant:"outline",className:"!text-sm rounded-sm text-primary hover:text-primary border-primary h-[40px] w-[120px]",onClick:()=>p(),disabled:x,children:x?e.jsx(D,{className:"h-4 w-4 animate-spin"}):"Load More"})})]})};export{Q as default};
