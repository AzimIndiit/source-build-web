import{j as e,S as a,c as V,r,aj as S,ak as T,al as R,W as L,am as _,an as I,ao as p,ap as Q}from"./index-BiCr9dd_.js";import{P as q}from"./pagination-wrapper-C-UNib8j.js";import{F as f}from"./FilterDropdown-AoAS3t64.js";import{b as G,c as H}from"./useProductMutations-u5jL6sZ4.js";import{P as J}from"./ProductCard-ueUUK-Pf.js";import{C as K}from"./circle-alert-Cy-Zb1fX.js";import"./index-BdQq_4o_.js";import"./productService-DV0qzB1U.js";import"./badge-gylWw4eT.js";import"./LazyImage-B7kMTuiL.js";import"./proxy-16hbtkMy.js";const X=()=>e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a,{className:"h-8 w-32"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"h-10 w-32 rounded-lg"}),e.jsx(a,{className:"h-10 w-24 rounded-lg"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:8}).map((j,n)=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx(a,{className:"w-full h-48"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx(a,{className:"h-5 w-full"}),e.jsx(a,{className:"h-4 w-3/4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(a,{className:"h-6 w-20"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(a,{className:"h-4 w-4 rounded"}),e.jsx(a,{className:"h-4 w-8"})]})]}),e.jsx(a,{className:"h-3 w-24"}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(a,{className:"h-8 flex-1 rounded"}),e.jsx(a,{className:"h-8 w-8 rounded"}),e.jsx(a,{className:"h-8 w-8 rounded"})]})]})]},n))}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(a,{className:"h-10 w-10 rounded"}),e.jsx(a,{className:"h-10 w-10 rounded"}),e.jsx(a,{className:"h-10 w-10 rounded"}),e.jsx(a,{className:"h-10 w-16 rounded"}),e.jsx(a,{className:"h-10 w-10 rounded"}),e.jsx(a,{className:"h-10 w-10 rounded"})]})]}),ne=()=>{const j=V(),[n,x]=r.useState(1),[O,y]=r.useState({sorting:"ascending"}),[i,o]=r.useState("all"),[m,N]=r.useState({popularity:[{id:"best-selling",label:"Best-Selling Products",checked:!1},{id:"most-viewed",label:"Most Viewed",checked:!1},{id:"top-rated",label:"Top-Rated",checked:!1},{id:"most-reviewed",label:"Most Reviewed",checked:!1},{id:"featured",label:"Featured Products",checked:!1},{id:"trending",label:"Trending Now",checked:!1}],newest:[{id:"recently-updated",label:"Recently Updated",checked:!1},{id:"featured-new",label:"Featured New Products",checked:!1},{id:"sort-by-date",label:"Sort by Date Added",checked:!1},{id:"new-arrivals",label:"New Arrivals",checked:!1}],availability:[{id:"delivery",label:"Delivery",checked:!1},{id:"shipping",label:"Shipping",checked:!1},{id:"pickup",label:"Pickup",checked:!1}],readyTime:[{id:"next-day",label:"Ready Next Day",checked:!1},{id:"this-week",label:"Ready This Week",checked:!1}],sorting:"ascending",pricing:"",priceRange:[]}),[h,b]=r.useState({isOpen:!1,productId:"",productTitle:""}),$=10,{data:w,isLoading:W,isError:E,refetch:k}=G({page:n,limit:$,location:i==="all"?void 0:i,...O}),v=H(),u=s=>{N(s);const t={},A=s.popularity.filter(l=>l.checked).map(l=>l.id);A.length>0&&(t.popularity=A);const C=s.newest.filter(l=>l.checked).map(l=>l.id);C.length>0&&(t.newest=C);const D=s.availability.filter(l=>l.checked).map(l=>l.id);D.length>0&&(t.availability=D);const M=s.readyTime.filter(l=>l.checked).map(l=>l.id);M.length>0&&(t.readyTime=M),s.sorting!=="ascending"&&(t.sorting=s.sorting),s.pricing!=="custom"&&s.pricing!==""?t.pricing=s.pricing:s.priceRange&&s.pricing!==""&&(t.pricing="custom",t.priceRange=s.priceRange.join(",")),y(t),x(1)},g=()=>{y({}),x(1),N({popularity:[{id:"best-selling",label:"Best-Selling Products",checked:!1},{id:"most-viewed",label:"Most Viewed",checked:!1},{id:"top-rated",label:"Top-Rated",checked:!1},{id:"most-reviewed",label:"Most Reviewed",checked:!1},{id:"featured",label:"Featured Products",checked:!1},{id:"trending",label:"Trending Now",checked:!1}],newest:[{id:"recently-updated",label:"Recently Updated",checked:!1},{id:"featured-new",label:"Featured New Products",checked:!1},{id:"sort-by-date",label:"Sort by Date Added",checked:!1},{id:"new-arrivals",label:"New Arrivals",checked:!1}],availability:[{id:"delivery",label:"Delivery",checked:!1},{id:"shipping",label:"Shipping",checked:!1},{id:"pickup",label:"Pickup",checked:!1}],readyTime:[{id:"next-day",label:"Ready Next Day",checked:!1},{id:"this-week",label:"Ready This Week",checked:!1}],sorting:"ascending",pricing:"",priceRange:[]})},z=(s,t)=>{j(`/products/${s}`)},B=async()=>{try{await v.mutateAsync(h.productId),b({isOpen:!1,productId:"",productTitle:""}),k()}catch(s){console.error("Failed to delete product:",s)}},U=()=>{b({isOpen:!1,productId:"",productTitle:""})};if(W)return e.jsx(X,{});if(E)return e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Marketplace"}),e.jsx(f,{onApply:u,onClear:g,initialFilters:m})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(K,{className:"h-12 w-12 text-red-500"}),e.jsx("p",{className:"text-gray-600",children:"Failed to load products"}),e.jsx("button",{onClick:()=>k(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90",children:"Try Again"})]})]});const d=w?.data,P=Array.isArray(d)?d:d?.products||[],c=Array.isArray(d)?[]:d?.availableLocations||[],F=w?.pagination?.totalPages||1;return P.length===0?e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Marketplace"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{children:[e.jsx(T,{asChild:!0,children:e.jsxs("button",{className:"bg-blue-50 flex gap-2 h-[42px] items-center px-2 md:px-3 py-2 rounded-lg hover:bg-blue-100 transition-colors outline-none cursor-pointer",children:[e.jsx(R,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-xs text-gray-600 hidden md:block",children:"Location"}),e.jsxs("span",{className:"text-xs md:text-sm font-semibold text-gray-900 flex items-center gap-1",children:[i==="all"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden lg:inline",children:"All Locations"}),e.jsx("span",{className:"lg:hidden",children:"All"})]}):e.jsx(e.Fragment,{children:c.find(s=>s._id===i)?.displayName||c.find(s=>s._id===i)?.city||"Select Location"}),e.jsx(L,{size:12})]})]})]})}),e.jsxs(_,{align:"start",className:"w-56",children:[e.jsx(I,{}),e.jsx(p,{className:"cursor-pointer",onClick:()=>o("all"),children:"All Locations"}),c.map(s=>e.jsx(p,{className:"cursor-pointer",onClick:()=>o(s._id),children:s.displayName||`${s.city}, ${s.state}`},s._id))]})]}),e.jsx(f,{onApply:u,onClear:g,initialFilters:m})]})]}),e.jsx("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:e.jsx("p",{className:"text-gray-600",children:"No products found"})})]}):e.jsxs("div",{className:"py-4 md:p-4 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Marketplace"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{children:[e.jsx(T,{asChild:!0,children:e.jsxs("button",{className:"bg-blue-50 flex gap-2 h-[42px] items-center px-2 md:px-3 py-2 rounded-lg hover:bg-blue-100 transition-colors outline-none cursor-pointer",children:[e.jsx(R,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-xs text-gray-600 hidden md:block",children:"Location"}),e.jsxs("span",{className:"text-xs md:text-sm font-semibold text-gray-900 flex items-center gap-1",children:[i==="all"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden lg:inline",children:"All Locations"}),e.jsx("span",{className:"lg:hidden",children:"All"})]}):e.jsx(e.Fragment,{children:c.find(s=>s._id===i)?.displayName||c.find(s=>s._id===i)?.city||"Select Location"}),e.jsx(L,{size:12})]})]})]})}),e.jsxs(_,{align:"start",className:"w-56",children:[e.jsx(I,{}),e.jsx(p,{className:"cursor-pointer",onClick:()=>o("all"),children:"All Locations"}),c.map(s=>e.jsx(p,{className:"cursor-pointer",onClick:()=>o(s._id),children:s.displayName||`${s.city}, ${s.state}`},s._id))]})]}),e.jsx(f,{onApply:u,onClear:g,initialFilters:m})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:P.map(s=>e.jsx(J,{product:s,onProductClick:z},s.id||s._id))}),F>1&&e.jsx(q,{currentPage:n,totalPages:F,onPageChange:x}),e.jsx(Q,{isOpen:h.isOpen,onClose:U,onConfirm:B,title:"Delete Product",description:e.jsxs(e.Fragment,{children:["Are you sure you want to delete"," ",e.jsxs("strong",{className:"font-semibold",children:['"',h.productTitle,'"']}),"? This action cannot be undone."]}),confirmText:"Delete",cancelText:"Cancel",isLoading:v.isPending})]})};export{ne as default};
