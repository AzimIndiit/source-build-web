import{j as t,u as _,r as o,z as G}from"./index-CUSVstqU.js";import{P as J}from"./pagination-wrapper-Caj-HnEp.js";import{b as K}from"./useOrderMutations-CL6oNQvb.js";import{S as R}from"./SellerOrdersPageSkeleton--K0ktxCX.js";import{S as P}from"./SortDropdown-BZ2QEsue.js";import{t as U,O as C}from"./orderTransformers-DSlKWA6p.js";import{E as X}from"./EmptyState-CH6fPGhV.js";import{B as Z}from"./buyingEmptyState-C5ryqnDV.js";import{O as tt}from"./OrderProductCard-CeIdk2Wm.js";import"./en-US-CPLesiGp.js";import"./isSameDay-CeY-boyx.js";import"./format-Byp0gi1d.js";import"./endOfMonth-B0jjArdg.js";import"./StarRating-sEf5bhyI.js";import"./badge-c_xwgsXg.js";import"./date-utils-CIparGJB.js";import"./orderUtils-DR-jD4b-.js";import"./colorUtils-BjIcJb6R.js";const et=({orders:x,onViewDetails:l,onWriteReview:m,onBuyAgain:h})=>{const n=r=>()=>{l(r)};return t.jsx("div",{className:"space-y-6",children:x.map(r=>{const d=r._id||r.id;return t.jsx("div",{className:"relative",children:t.jsx(tt,{order:r,viewOrderDetailes:!0,onViewItem:n(d),onWriteReview:m,onBuyAgain:h})},d)})})},yt=()=>{const x=_(),[l,m]=o.useState(1),[h]=o.useState(10),[n,r]=o.useState("recent"),[d,M]=o.useState(),[i,k]=o.useState({orderStatus:"",pricing:""}),f=o.useCallback((e,a,s)=>{const N=new Date;let c,b,S="-createdAt";if(a)switch(a){case"high-to-low":S="-amount";break;case"low-to-high":S="amount";break}else switch(e){case"custom":if(s){const V=s.from.getFullYear(),W=String(s.from.getMonth()+1).padStart(2,"0"),z=String(s.from.getDate()).padStart(2,"0");c=`${V}-${W}-${z}`;const L=s.to.getFullYear(),q=String(s.to.getMonth()+1).padStart(2,"0"),Q=String(s.to.getDate()).padStart(2,"0");b=`${L}-${q}-${Q}`}break;case"this-week":const g=new Date;g.setDate(g.getDate()-g.getDay()),g.setHours(0,0,0,0),c=g.toISOString().split("T")[0];break;case"this-month":const v=new Date(N.getFullYear(),N.getMonth(),1);v.setHours(0,0,0,0),c=v.toISOString().split("T")[0];break;case"last-3-months":const p=new Date;p.setMonth(p.getMonth()-3),p.setHours(0,0,0,0),c=p.toISOString().split("T")[0];break;case"last-6-months":const u=new Date;u.setMonth(u.getMonth()-6),u.setHours(0,0,0,0),c=u.toISOString().split("T")[0];break}return{startDate:c,endDate:b,sort:S}},[]),I=o.useMemo(()=>{const{startDate:e,endDate:a,sort:s}=f(n,i.pricing,d);return{page:l,limit:h,...e&&{startDate:e},...a&&{endDate:a},...s&&{sort:s},...i.orderStatus&&{status:i.orderStatus}}},[l,h,n,i,d,f]),{data:j,isLoading:F,isError:E,error:$}=K(I),Y=e=>{x(`/buying/${e}`)},A=e=>{G.success("Redirecting to product...")},B=()=>{},H=e=>{m(e)},y=(e,a)=>{r(e),M(a),m(1)},w=e=>{k(e),m(1)};if(F)return t.jsx(R,{});if(E)return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-center",children:[t.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"Error loading orders"}),t.jsx("p",{className:"text-gray-600 text-sm",children:$?.response?.data?.message||"Failed to fetch orders. Please try again."})]});const T=j?.data||[],D=U(T),O=j?.pagination?.totalPages||1;return D.length?t.jsxs("div",{className:"py-4 md:p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Orders"}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[t.jsx(P,{selectedSort:n,onSortChange:y}),t.jsx(C,{filters:i,onFilterChange:w})]})]}),t.jsx(et,{orders:D,onViewDetails:Y,onWriteReview:B,onBuyAgain:A}),O>1&&t.jsx(J,{currentPage:l,totalPages:O,onPageChange:H})]}):t.jsxs("div",{className:"py-4 md:p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Orders"}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[t.jsx(P,{selectedSort:n,onSortChange:y}),t.jsx(C,{filters:i,onFilterChange:w})]})]}),t.jsx(X,{title:"No orders found",description:"You don't have any orders yet. Start shopping to see your orders here.",icon:t.jsx("img",{src:Z,className:"w-64 h-56"}),className:"min-h-[400px]"})]})};export{yt as default};
